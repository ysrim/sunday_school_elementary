<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="app.psn.com.mapper.DomainMapper">

	<select id="sltQuest" parameterType="Integer" resultType="app.psn.com.vo.QuestVO">
		SELECT QUEST_SN
			 , TITLE
			 , DESCRIPTION
			 , REWARD_EXP
			 , REWARD_POINT
			 , QUEST_TYPE
			 , EMOJI
			 , TARGET_GRADE
			 , IMMEDIATE_PAY_YN
		FROM QUESTS
		WHERE USE_AT = 'Y'
		  AND QUEST_SN = #{questSn}
	</select>

	<select id="sltAvatar" parameterType="Integer" resultType="app.psn.com.vo.AvatarVO">
		SELECT MBER_SN
			 , NCNM
			 , LEVEL
			 , EXP
			 , POINT
			 , OCCP_CODE
		FROM AVATAR_INFO
		WHERE MBER_SN = #{mberSn}
	</select>

	<select id="sltQuestContinuityRules" parameterType="Integer" resultType="app.psn.com.vo.QuestContinuityRulesVO">
		SELECT QUEST_SN
			 , CONTINUITY_DAYS
			 , BONUS_EXP
			 , BONUS_POINT
			 , DESCRIPTION
		FROM QUEST_CONTINUITY_RULES
		WHERE USE_AT = 'Y'
		  AND QUEST_SN = #{questSn}
	</select>

	<select id="sltQuestContinuity" parameterType="Integer" resultType="app.psn.com.vo.QuestContinuityVO">
		SELECT MBER_SN,
			   QUEST_SN,
			   CURRENT_STREAK,
			   DATE_FORMAT(LAST_SUCCESS_DE, '%Y%m%d') AS LAST_SUCCESS_DE
		FROM QUEST_CONTINUITY
		WHERE MBER_SN = #{mberSn}
		  AND QUEST_SN = #{questSn}
	</select>

	<select id="sltAvatarLevelRules" parameterType="Integer" resultType="app.psn.com.vo.AvatarLevelRulesVO">
		SELECT LEVEL
			 , REQUIRED_EXP
			 , RANK_NAME
			 , REWARD_POINT
		FROM AVATAR_LEVEL_RULES
		WHERE LEVEL = #{level}
	</select>

</mapper>