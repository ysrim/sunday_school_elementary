<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/app/psn/stu/layouts/std_layout}">

<th:block layout:fragment="content">
    <div style="margin: 25px 25px 10px 25px; display: flex; align-items: center;">
        <div style="width: 4px; height: 16px; background-color: #4A90E2; border-radius: 2px; margin-right: 10px;"></div>
        <h3 style="margin: 0; font-size: 1.15rem; color: #333; font-weight: 800;">용사/길드 정보</h3>
    </div>

    <div class="card" style="padding: 0; overflow: hidden; margin-bottom: 20px;">
        <div style="display: flex; border-bottom: 1px solid #eee;">
            <div style="flex: 1; padding: 25px 10px; text-align: center; border-right: 1px solid #eee;">
                <div style="position: relative; width: 65px; height: 65px; margin: 0 auto 10px;">
                    <img th:src="|https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/${session.mberInfo.occpCode}_${#strings.toLowerCase(session.mberInfo.sexdstn)}.png|"
                         alt="내 캐릭터" class="mypage-profile-img">
                    <div style="position: absolute; bottom: -5px; right: -5px; background: #333; color: #fff; font-size: 0.6rem; font-weight: 800; padding: 2px 6px; border-radius: 8px; border: 2px solid #fff;"
                         th:text="|Lv. ${_mberLevel}|">
                        Lv.15
                    </div>
                </div>

                <div style="font-size: 0.85rem; color: #0D47A1; font-weight: 700; margin-bottom: 4px;"
                     th:text="|⚔️ ${session.mberInfo.occpNm}|">전사
                </div>

                <h2 id="mypage-name"
                    style="font-size: 1.25rem; margin: 0; color: #222; letter-spacing: -0.5px; font-weight: 800;"
                    th:text="|${session.mberInfo.mberNm} (${session.mberInfo.ncnm})|">김용사</h2>

                <div class="text-light" style="font-size: 0.8rem; margin-top: 5px; color: #777;"
                     th:text="|초등부 ${session.mberInfo.grade}학년 ${session.mberInfo.cla}반|">1학년 1반
                </div>
            </div>

            <div style="flex: 1; padding: 25px 10px; text-align: center; cursor: pointer;"
                 onclick="showPage('page-guild')">
                <div style="position: relative; width: 65px; height: 65px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center;">
                    <img th:src="|https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/guild/grade/guid_image_${session.mberInfo.grade}_${session.mberInfo.cla}.png|"
                         style="width: 100%; height: 100%; object-fit: contain;">
                    <div style="position: absolute; bottom: -5px; right: -5px; background: #333; color: #fff; font-size: 0.6rem; font-weight: 800; padding: 2px 6px; border-radius: 8px; border: 2px solid #fff;">
                        Lv. 1
                    </div>
                </div>

                <div style="font-size: 0.85rem; color: #6D4C41; font-weight: 700; margin-bottom: 4px;"
                     th:text="|길드원: 12명|">
                </div>

                <h2 style="font-size: 1.25rem; margin: 0; color: #4E342E; letter-spacing: -0.5px; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 4px;">
                    <span th:text="|${session.mberInfo.guildNm}|">다윗의 용사들</span>
                </h2>

                <div style="font-size: 0.8rem; margin-top: 5px; color: var(--primary); font-weight: 600;">
                    길드 입장 ›
                </div>
            </div>
        </div>
        <div class="flex-row" style="padding: 15px 0; background-color: #fafafa; border-top: 1px solid #eee;">
            <div class="flex-col flex-center flex-1" style="border-right: 1px solid #e0e0e0;">
                <div class="flex-row gap-5 mb-5">
                    <span style="font-size: 1rem;">💰</span>
                    <span class="text-light" style="font-size: 0.8rem;">보유 달란트</span>
                </div>
                <span style="font-size: 1.2rem; font-weight: 800; color: #F59E0B;">
                    <span class="sub-money"
                          th:text="${#numbers.formatInteger(_mberPoint, 0, 'COMMA')}">2,500</span>
                    <span style="font-size: 0.9rem; color: #999; font-weight: 600;">P</span>
                </span>
            </div>

            <div class="flex-col flex-center flex-1">
                <div class="flex-row gap-5 mb-5">
                    <span style="font-size: 1rem;">⚡</span>
                    <span class="text-light" style="font-size: 0.8rem;">현재 경험치</span>
                </div>
                <span style="font-size: 1.2rem; font-weight: 800; color: #3B82F6;"
                      th:text="${#numbers.formatInteger(_mberExp.currentExp, 0, 'COMMA')}">
                    1,250
                    <span style="font-size: 0.9rem; color: #999; font-weight: 600;">XP</span>
                </span>
            </div>
        </div>
    </div>

    <div class="section-title">바로가기</div>
    <div class="flex-row gap-10" style="margin: 0 20px 20px;">
        <button class="card flex-col flex-center gap-5" style="margin: 0; flex: 1; padding: 15px; cursor: pointer;"
                th:onclick="|location.href='@{/std/opts/qrCode.pg}'|">
            <span style="font-size: 1.8rem;">🔍</span>
            <span class="text-bold" style="font-size: 0.9rem;">QR체크인</span>
        </button>
        <button class="card flex-col flex-center gap-5" style="margin: 0; flex: 1; padding: 15px; cursor: pointer;"
                th:onclick="|location.href='@{/std/gild.pg}'|">
            <span style="font-size: 1.8rem;">🧾</span>
            <span class="text-bold" style="font-size: 0.9rem;">내역확인</span>
        </button>
    </div>

    <div class="menu-list" style="margin-top: 0;">
        <div class="menu-item" th:onclick="|location.href='@{/std/gild.pg}'|">
            <div class="flex-row gap-10">
                <span style="font-size: 1.2rem;">🏷️</span>
                <span class="text-bold text-sub" style="font-size: 1rem;">이름 변경</span>
            </div>
            <span style="color:#ccc;">›</span>
        </div>
        <div class="menu-item" th:onclick="|location.href='@{/std/gild.pg}'|">
            <div class="flex-row gap-10">
                <span style="font-size: 1.2rem;">🔐</span>
                <span class="text-bold text-sub" style="font-size: 1rem;">비밀번호 변경</span>
            </div>
            <span style="color:#ccc;">›</span>
        </div>
        <div class="menu-item" th:onclick="|location.href='@{/idx/logOut.pg}'|">
            <div class="flex-row gap-10">
                <span style="font-size: 1.2rem;">🚪</span>
                <span class="text-bold text-red" style="font-size: 1rem;">로그아웃</span>
            </div>
            <span style="color:#ccc;">›</span>
        </div>
    </div>

    <div class="text-center text-light mt-30 mb-20" style="font-size:0.75rem;">Ver 1.0.0</div>
</th:block>
</html>