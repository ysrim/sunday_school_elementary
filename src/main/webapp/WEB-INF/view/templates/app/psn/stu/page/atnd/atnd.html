<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{/app/psn/stu/layouts/std_layout}">

<th:block layout:fragment="content">
	<script th:inline="javascript">
		$(function () {
			// ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œìš©
			const options = { month: 'long', day: 'numeric', weekday: 'long' };
			$('#current-date').text(new Date().toLocaleDateString('ko-KR', options));

			$('#stamp-zone').click(function () {
				if ($(this).hasClass('checked')) {
					_showAlert('ì´ë¯¸ ì˜¤ëŠ˜ì˜ ì¶œì„ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!', 'ğŸ“…', 'ì•Œë¦¼');
					return;
				}
				$.ajax({
					type: "POST",
					url: "/std/atnd.ax",
					success: (data) => {
						if (data.rtnCd === '001') {
							$(this).addClass('checked').css({
								'background': '#FFF0F0',
								'border-color': '#FF6B6B',
								'border-style': 'solid'
							}).html('<img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/attendance.png" style="width:100px;">');

							$('.slot-circle.today').addClass('checked');
							_showAlert('ì°¸ ì˜í–ˆì–´ìš”!<br>ì¶œì„ ë‹¬ë€íŠ¸ <b>+100P</b>ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!',
								'<img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/attendance.png" style="width:80px;">', 'ì¶œì„ ì„±ê³µ!');
						} else {
							_showAlert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!', 'ğŸ”¥', 'ì˜¤ë¥˜');
						}
					},
					error: (e) => {
						console.error(e);
						_showAlert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'ğŸ”¥', 'ì˜¤ë¥˜');
					}
				});
			});
		});
	</script>

	<div style="margin: 20px 25px 10px 25px; display: flex; align-items: center;">
		<span style="color: #4A90E2; font-size: 0.7rem; margin-right: 8px;">â—</span>
		<h3 style="margin: 0; font-size: 1.1rem; color: #333; font-weight: 700;">ì¶œì„ í˜„í™©</h3>
	</div>

	<div class="card" style="margin: 0 15px; padding: 30px 20px; text-align: center; border-radius: 25px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border: none; background: #fff;">

		<div style="margin-bottom: 25px; border-bottom: 2px solid #f8f9fa; padding-bottom: 15px;">
			<h3 style="color: #333; font-size: 1.3rem; font-weight: 800; margin: 0;">ğŸ“… [[${currMonth}]]ì›” ì¶œì„ë¶€</h3>
			<p style="font-size: 0.85rem; color: #999; margin-top: 5px;">ê¾¸ì¤€íˆ ì¶œì„í•˜ê³  ì„ ë¬¼ì„ ë°›ì•„ë³´ì„¸ìš”!</p>
		</div>

		<h4 style="color: #4A90E2; margin-bottom: 5px; font-weight: 700;">ì˜¤ëŠ˜ì˜ ì¶œì„ ë„ì¥</h4>
		<p style="margin-bottom:20px; color: #888; font-size: 0.9rem;" id="current-date"></p>

		<div id="stamp-zone"
			 style="width:160px; height:160px; background:#f9f9f9; border-radius:50%; margin:20px auto; display:flex; align-items:center; justify-content:center; border:3px dashed #d1d1d1; cursor:pointer; flex-direction: column; gap: 8px; transition: all 0.2s;">
			<img src="https://cdn-icons-png.flaticon.com/512/10439/10439744.png" style="width:45px; opacity: 0.4;">
			<span style="font-size:0.85rem; color:#999; font-weight: bold; line-height:1.4;">ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ì„œ<br>ì¶œì„ì²´í¬!</span>
		</div>

		<div class="attendance-status-board" style="display: flex; justify-content: center; gap: 8px; margin-bottom: 20px;">
			<div class="day-slot" th:each="vo : ${attendanceList}" style="text-align: center;">
				<div th:class="|slot-circle ${vo.attendance} ${vo.today}|"
					 style="width: 35px; height: 35px; border-radius: 50%; background: #eee; margin-bottom: 5px;"></div>
				<span style="font-size: 0.75rem; color: #999;">[[${vo.week}]]ì£¼</span>
			</div>
		</div>

		<p style="font-size: 0.85rem; color: #999; margin-top: 15px;">
			ë§¤ì¼ë§¤ì¼ ì¶œì„í•˜ê³  <b style="color: #4A90E2;">100 ë‹¬ë€íŠ¸</b>ë¥¼ ë°›ìœ¼ì„¸ìš”!
		</p>
	</div>
</th:block>
</html>