<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{/app/psn/stu/layouts/std_layout}">
<th:block layout:fragment="content">
	<div style="margin: 25px 25px 10px 25px; display: flex; align-items: center;">
		<div style="width: 4px; height: 16px; background-color: #4A90E2; border-radius: 2px; margin-right: 10px;"></div>
		<h3 style="margin: 0; font-size: 1.15rem; color: #333; font-weight: 800;">길드 정보</h3>
	</div>
	<div class="guild-banner-card">
		<div class="guild-badge-wrapper">
			<div class="guild-badge-icon">
				<img th:src="|https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/guild/grade/guid_image_${guildInfo.grade}_${guildInfo.cla}.png|" alt="길드마크">
			</div>
			<div class="guild-lvl-badge" th:text="|LV. ${guildInfo.guildLevel}|">LV. 5</div>
		</div>
		<h2 class="guild-main-name" style="margin: 5px 0;" th:text="|${guildInfo.guildNm}|">다윗의 용사들</h2>
		<p style="opacity: 0.8; font-style: italic; margin-bottom: 20px;" th:text="|&quot;${guildInfo.rm}&quot;|">"두려워 말고 믿음으로 나아가자!"</p>
		<div class="flex-row" style="justify-content: space-around; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 15px;">
			<div class="guild-stat-box">
				<span style="font-size: 0.7rem; opacity: 0.6;">길드원</span>
				<span style="font-weight: bold;" th:text="|${guildMberAccessList.size()}/${guildMberCnt}|">12/20</span>
			</div>
			<div class="guild-stat-box"><span style="font-size: 0.7rem; opacity: 0.6;">랭킹</span><span style="font-weight: bold;">-</span></div>
			<div class="guild-stat-box"><span style="font-size: 0.7rem; opacity: 0.6;">포인트</span><span style="font-weight: bold;">-</span></div>
		</div>
	</div>
	<div class="section-title">💬 길드원 응원방</div>
	<div class="card">
		<div id="guild-chat-list" style="max-height: 150px; overflow-y: auto; background: #F8F9FA; border-radius: 10px; padding: 10px; margin-bottom: 10px;">
			<div class="mb-5 text-sub">
				<span class="text-bold" style="color: #333; margin-right: 5px;">김하늘:</span>
				<span>오늘 미션 다들 했어? 화이팅!</span>
			</div>
			<div class="mb-5 text-sub">
				<span class="text-bold" style="color: #333; margin-right: 5px;">이믿음:</span>
				<span>응! 나도 방금 완료했어 ㅎㅎ</span>
			</div>
			<div class="mb-5 text-sub" style="animation: fadeIn 0.3s;"><span class="text-bold text-blue" style="margin-right:5px;">신입 용사님:</span><span>123</span></div>
		</div>
		<div class="flex-row gap-5">
			<input type="text" id="guild-chat-input" name="guild-chat-input" placeholder="응원 메시지를 남겨보세요!" style="margin: 0; flex: 1;">
			<button onclick="sendGuildChat()" style="background: var(--secondary); color: white; border: none; border-radius: 10px; padding: 0 15px; font-weight: bold; height: 42px;">전송</button>
		</div>
	</div>
	<div class="section-title">
		<span>👥 길드원 목록</span>
		<span class="text-light" style="font-weight: normal; font-size: 0.8rem; margin-left: auto;" th:text="|총 ${guildMberCnt}명|">총 12명</span>
	</div>
	<div class="card" style="padding: 5px 15px;">
		<div class="flex-row" style="padding: 10px 5px; border-bottom: 2px solid #f5f5f5; font-size: 0.75rem; color: #999; font-weight: bold;">
			<span style="flex: 1; padding-left: 5px;">이름 / 직업</span>
			<span style="width: 120px; text-align: right;">Lv / 달란트</span>
		</div>
		<div style="max-height: 300px; overflow-y: auto;">
			<div class="member-row" style="border:none; border-bottom:1px dashed #eee; border-radius:0;" th:each="vo : ${guildMberAccessList}">
				<img th:src="|https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/${vo.occpCode}_${#strings.toLowerCase(vo.sexdstn)}.png|" class="member-avatar">
				<div class="flex-col flex-1">
					<span class="text-bold" style="font-size: 0.9rem;">[[${vo.ncnm}]] [[${vo.mberId == session.mberInfo.mberId ? '(나)' : '('+session.mberInfo.mberNm+')'}]]</span>
					<span class="text-light" style="font-size: 0.75rem;" th:if="${vo.isAccess}">
						<span class="status-dot online"></span>접속 중
					</span>
				</div>
				<div class="text-right" style="font-size: 0.85rem;">
					<span class="text-bold text-sub text-blue" th:text="|Lv.${vo.level} ${vo.occpNm}|">Lv.14</span>
					<span style="color: #ccc; margin: 0 4px;">/</span>
					<span class="text-sub text-bold" th:text="|${vo.point} P|">2,500 P</span>
				</div>
			</div>
		</div>
	</div>
</th:block>
</html>