<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/app/psn/mng/layouts/mng_layout}" lang="ko">
<th:block layout:fragment="content">
	<link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css"/>
	<script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>

	<div id="page-notice" class="page-content w-full min-h-screen bg-[#f8fafc] p-6 lg:p-10 font-sans text-slate-600 animate-slide-up">

		<div id="view-write" class="animate-slide-up max-w-5xl mx-auto">
			<header class="flex justify-between items-center mb-8 sticky top-0 bg-[#f8fafc]/90 backdrop-blur-sm z-10 py-4">
				<div class="flex items-center gap-4">
					<button onclick="history.back()"
					        class="w-10 h-10 rounded-full bg-white border border-slate-200 text-slate-500 flex items-center justify-center hover:bg-slate-50 hover:text-slate-900 transition shadow-sm">
						<i class="fas fa-arrow-left"></i>
					</button>
					<div>
						<h1 id="form-title" class="text-2xl font-black text-slate-900 tracking-tight">ê³µì§€ì‚¬í•­ ì‘ì„±</h1>
						<p class="text-xs text-slate-500 font-medium mt-1">ìƒˆë¡œìš´ ì†Œì‹ì„ ì™•êµ­ êµ¬ì„±ì›ë“¤ì—ê²Œ ì•Œë¦½ë‹ˆë‹¤.</p>
					</div>
				</div>
				<div class="flex gap-2">
					<button type="button" onclick="history.back()"
					        class="px-5 py-2.5 rounded-xl bg-white border border-slate-200 text-slate-600 text-sm font-bold hover:bg-slate-50 transition shadow-sm">
						ì·¨ì†Œ
					</button>
					<button type="button" id="btn-save"
					        class="px-6 py-2.5 rounded-xl bg-indigo-600 text-white text-sm font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-200 transition flex items-center">
						<i class="fas fa-paper-plane mr-2"></i> ê²Œì‹œí•˜ê¸°
					</button>
				</div>
			</header>

			<form id="noticeForm" class="pb-20">
				<div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
					<div class="lg:col-span-3 space-y-6">
						<div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
							<div class="mb-6">
								<label class="form-label block text-sm font-bold text-slate-700 mb-2">ì œëª© <span class="text-red-500">*</span></label>
								<input type="text" id="title" name="title" placeholder="ê³µì§€ì‚¬í•­ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
								       class="w-full text-lg font-bold placeholder-slate-300 py-3 border-b-2 border-slate-100 focus:border-indigo-500 outline-none transition bg-transparent">
							</div>

							<div>
								<label class="form-label block text-sm font-bold text-slate-700 mb-2">ë‚´ìš©</label>
								<div id="editor-container" class="bg-white"></div>
							</div>
						</div>
					</div>

					<div class="lg:col-span-1 space-y-6">
						<div class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm sticky top-24">
							<h2 class="text-xs font-black text-slate-800 uppercase mb-5 tracking-wider border-b border-slate-100 pb-3 flex items-center justify-between">
								ê²Œì‹œ ì„¤ì • <i class="fas fa-cog text-slate-300"></i>
							</h2>

							<div class="space-y-5">
								<div>
									<label class="block text-xs font-bold text-slate-600 mb-2">ì¹´í…Œê³ ë¦¬</label>
									<select id="category" class="w-full rounded-xl border-slate-200 text-sm text-slate-600 focus:ring-indigo-500 focus:border-indigo-500 py-2.5">
										<option value="NOTICE">ğŸ“¢ ê³µì§€ì‚¬í•­</option>
										<option value="EVENT">ğŸ‰ ì´ë²¤íŠ¸</option>
										<option value="NEWS">ğŸ“° ê°€ì •í†µì‹ ë¬¸</option>
									</select>
								</div>

								<div>
									<label class="block text-xs font-bold text-slate-600 mb-2">ê²Œì‹œ ì˜µì…˜</label>
									<div class="space-y-3 bg-slate-50 p-4 rounded-xl border border-slate-100">
										<label class="flex items-center gap-3 cursor-pointer group">
											<input type="checkbox" id="isPinned" class="w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer">
											<span class="text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors">ğŸ“Œ ìƒë‹¨ ê³ ì • (Pin)</span>
										</label>
										<label class="flex items-center gap-3 cursor-pointer group">
											<input type="checkbox" id="isSecret" class="w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer">
											<span class="text-xs font-bold text-slate-600 group-hover:text-indigo-600 transition-colors">ğŸ”’ ë¹„ê³µê°œ ì²˜ë¦¬</span>
										</label>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>

	<script th:inline="javascript">
		document.addEventListener('DOMContentLoaded', function () {
			// 1. Toast UI Editor ì´ˆê¸°í™”
			const editor = new toastui.Editor({
				el: document.querySelector('#editor-container'),
				height: '500px', // í•„ìš”ì‹œ ë†’ì´ ì¡°ì ˆ
				initialEditType: 'wysiwyg',
				previewStyle: 'vertical',
				language: 'ko-KR',
				placeholder: 'ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.',
				toolbarItems: [
					['heading', 'bold', 'italic', 'strike'],
					['hr', 'quote'],
					['ul', 'ol', 'task', 'indent', 'outdent'],
					['table', 'image', 'link'],
					['code', 'codeblock']
				]
			});

			// 2. ê²Œì‹œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
			document.getElementById('btn-save').addEventListener('click', function () {
				const title = document.getElementById('title').value;
				const content = editor.getHTML(); // ì—ë””í„° ë‚´ìš©ì„ HTMLë¡œ ê°€ì ¸ì˜´
				const category = document.getElementById('category').value;
				const isPinned = document.getElementById('isPinned').checked;
				const isSecret = document.getElementById('isSecret').checked;

				if (!title.trim()) {
					alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
					return;
				}

				if (editor.getMarkdown().length < 1) {
					alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
					return;
				}

				// ì„œë²„ ì „ì†¡ ë¡œì§ (ì˜ˆì‹œ)
				console.log('--- ì „ì†¡í•  ë°ì´í„° ---');
				console.log('ì œëª©:', title);
				console.log('ì¹´í…Œê³ ë¦¬:', category);
				console.log('ë‚´ìš©(HTML):', content);
				console.log('ìƒë‹¨ê³ ì •:', isPinned);
				console.log('ë¹„ê³µê°œ:', isSecret);

				alert('ì €ì¥ ì¤€ë¹„ ì™„ë£Œ (ì½˜ì†” í™•ì¸)');
			});
		});
	</script>

</th:block>
</html>