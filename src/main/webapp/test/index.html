<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë´‰ë™ì¤‘ì•™êµíšŒ ì´ˆë“±ë¶€ RPG</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* =========================================
           1. ê¸°ë³¸ ì„¤ì • (Reset & Variables)
           ========================================= */
        :root {
            --primary: #FFD700;       /* í¬ì¸íŠ¸ ì»¬ëŸ¬ (ë…¸ë‘) */
            --secondary: #4A90E2;     /* ë©”ì¸ í…Œë§ˆ (íŒŒë‘) */
            --bg: #E3F2FD;            /* ë°°ê²½ìƒ‰ */
            --text: #333;             /* ê¸€ììƒ‰ */
            --white: #ffffff;
            --gray: #999;
            --light-gray: #f0f0f0;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg);
            background-image: url('https://www.transparenttextures.com/patterns/clouds.png');
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: #ffffff;
            position: relative;
            padding-bottom: 80px; /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ê³µê°„ */
            overflow-x: hidden;
            display: flex; flex-direction: column;
        }

        /* í˜ì´ì§€ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
        .page {
            display: none;
            padding-bottom: 20px;
            animation: fadeIn 0.3s ease;
            width: 100%;
        }
        .page.active { display: block; }

        /* ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            margin: 15px 20px;
            width: calc(100% - 40px);
            background: var(--white);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
            border: none;
            transition: transform 0.2s;
        }

        /* ì„¹ì…˜ íƒ€ì´í‹€ */
        .section-title {
            margin: 25px 20px 10px 25px;
            font-size: 1rem;
            font-weight: 800;
            color: #444;
            display: flex; align-items: center; gap: 5px;
        }

        /* ê³µí†µ ë²„íŠ¼ */
        .btn {
            width: 100%; padding: 15px; border-radius: 50px; border: none;
            font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.2s; margin-top: 10px;
        }
        .btn-main { background: var(--primary); color: #444; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); }
        .btn-sub { background: var(--secondary); color: white; }
        
        .icon-btn {
            width: 36px; height: 36px; border: none; border-radius: 12px;
            background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); transition: all 0.2s;
        }
        .icon-btn:active { transform: scale(0.9); background: rgba(255, 255, 255, 0.8); }
        .icon-btn img { width: 20px; height: 20px; filter: brightness(0) invert(1); }

        input[type="text"], input[type="password"] {
            width: 100%; padding: 12px; margin-bottom: 10px;
            border: 1px solid #ddd; border-radius: 10px; font-size: 0.9rem;
        }

        /* =========================================
           2. í—¤ë” (Header)
           ========================================= */
        header {
            padding: 20px 20px 40px 20px;
            background: linear-gradient(135deg, #4A90E2 0%, #2196F3 100%);
            border-radius: 0 0 35px 35px;
            position: relative;
            box-shadow: 0 10px 20px rgba(74, 144, 226, 0.2);
        }
        header .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        header h1 { font-size: 1.1rem; color: rgba(255, 255, 255, 0.95); font-weight: 700; }
        .header-actions { position: absolute; right: 20px; top: 15px; display: flex; gap: 10px; }

        .sub-header {
            padding: 15px 20px;
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            display: flex; align-items: center; justify-content: space-between;
            position: sticky; top: 0; z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); color: white;
        }
        .sub-header-left { display: flex; align-items: center; gap: 10px; }
        .sub-header h2 { font-size: 1.1rem; font-weight: 700; margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
        .sub-header-info { display: flex; align-items: center; gap: 12px; }
        
        .btn-back-game { background: none; border: none; cursor: pointer; padding: 5px; display: flex; }
        .btn-back-game img { width: 24px; height: 24px; filter: brightness(0) invert(1); }
        
        .sub-info-badge { font-size: 0.85rem; color: rgba(255,255,255,0.9); }
        .sub-info-badge.money { color: #FFD700; font-weight: 800; }

        /* =========================================
           3. ë©”ì¸ í˜ì´ì§€ (Main Home)
           ========================================= */
        .profile-card {
            position: relative; z-index: 10;
            margin: -40px 20px 20px 20px; padding: 20px;
            background: #ffffff; border-radius: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }
        .profile-avatar-wrap {
            width: 75px; height: 75px; border-radius: 22px;
            border: 4px solid #FFF9E6; background: #fff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); overflow: hidden;
        }
        .user-rank-badge {
            display: inline-block; font-size: 0.7rem; padding: 3px 10px;
            border-radius: 8px; font-weight: bold; margin-bottom: 5px;
        }
        .exp-container {
            background: #F0F2F5; height: 10px; border-radius: 10px; margin-top: 8px; overflow: hidden;
        }
        .exp-bar-fill {
            width: 0%; height: 100%;
            background: linear-gradient(90deg, #4A90E2, #64B5F6);
            border-radius: 10px; transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .btn-amen {
            width: 100%; padding: 12px; border: 2px solid #E3F2FD;
            background: #F1F8FF; color: #4A90E2; border-radius: 12px;
            font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .btn-amen:active { background: #4A90E2; color: white; }
        .btn-amen.disabled { background: #eee; color: #aaa; border-color: #eee; cursor: default; }

        .guild-section {
            margin: 15px 20px; width: calc(100% - 40px);
            background: var(--white); border-radius: 25px; padding: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); border: none;
        }
        .guild-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .guild-tag { background: #FFF3E0; color: #EF6C00; font-size: 0.7rem; padding: 2px 8px; border-radius: 6px; font-weight: bold; }
        
        .guild-member-list { display: flex; flex-direction: column; gap: 10px; }
        .member-item { display: flex; align-items: center; padding: 10px; background: #F8FAFC; border-radius: 15px; }
        .member-avatar { width: 40px; height: 40px; border-radius: 12px; margin-right: 12px; background: #eee; }
        .member-info { flex: 1; }
        .member-name { font-size: 0.9rem; font-weight: 700; color: #444; }
        .member-status { font-size: 0.7rem; color: #999; }
        .master-badge { font-size: 0.65rem; color: #FFB800; border: 1px solid #FFB800; padding: 1px 5px; border-radius: 4px; margin-left: 5px; }

        .notice-list { display: flex; flex-direction: column; }
        .notice-item { padding: 12px 0; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
        .notice-item:last-child { border-bottom: none; }

        /* =========================================
           4. í€˜ìŠ¤íŠ¸ í˜ì´ì§€ (Quest) - íƒ€ì¼í˜• ë””ìì¸
           ========================================= */
        .quest-card {
            background: transparent !important;
            box-shadow: none !important;
            border: none !important;
            padding: 0 20px !important;
            margin: 10px 0 !important;
            position: relative;
        }

        .q-item {
            background: #ffffff;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex; align-items: center; gap: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
            border: 1px solid #f0f0f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .q-item:active { transform: scale(0.98); }
        .q-item:last-child { border-bottom: 1px solid #f0f0f0; margin-bottom: 15px; }

        .q-icon-box {
            width: 45px; height: 45px; background: #F1F8FF; border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; flex-shrink: 0; box-shadow: 0 2px 5px rgba(74, 144, 226, 0.1);
        }
        .q-icon-box.sunday { background: #FFF8E1; box-shadow: 0 2px 5px rgba(255, 143, 0, 0.1); }

        .q-content { flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 3px; }
        .q-title { font-size: 1rem; font-weight: 700; color: #333; line-height: 1.3; }
        .q-desc { font-size: 0.8rem; color: #999; }

        .q-reward-tag {
            display: inline-block; width: fit-content; font-size: 0.75rem;
            padding: 3px 8px; background: #f5f5f5; border-radius: 6px;
            color: #555; font-weight: bold; margin-top: 5px;
        }
        .q-reward-tag.sunday { color: #FF8F00; background: #FFF3E0; }

        .q-item.done { background: #f9f9f9; box-shadow: none; opacity: 0.8; }
        .q-item.done .q-title { text-decoration: line-through; color: #bbb; }
        .q-item.done .q-desc { color: #ccc; }
        .q-item.done .q-icon-box { filter: grayscale(100%); opacity: 0.5; }

        .btn-quest-action {
            padding: 10px 14px; border-radius: 12px; font-size: 0.85rem; font-weight: 800;
            cursor: pointer; transition: all 0.2s; min-width: 75px; text-align: center;
            border: none; outline: none; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .state-ready { background: #fff; border: 1px solid #4A90E2; color: #4A90E2; }
        .state-ready:active { background: #E3F2FD; }
        .state-wait {
            background: #FF9800; border: 1px solid #FF9800; color: white;
            box-shadow: 0 4px 10px rgba(255, 152, 0, 0.3); animation: pulse-orange 2s infinite;
        }
        .state-done { background: #e0e0e0; border: 1px solid #e0e0e0; color: #999; box-shadow: none; cursor: default; }

        #sunday-lock-overlay { border-radius: 20px !important; margin: 0 20px; width: auto !important; left: 0; right: 0; }

        .quest-guide-box {
            margin: 20px 20px 15px 20px; background: #ffffff; border-radius: 15px;
            padding: 15px; text-align: center; border: 1px dashed #ced4da;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }
        .guide-title {
            font-size: 0.85rem; font-weight: bold; color: #555; margin-bottom: 12px;
            display: inline-block; background: #f8f9fa; padding: 4px 12px; border-radius: 12px;
        }
        .guide-steps { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 8px; }
        .step { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .step-icon {
            font-size: 1.2rem; width: 36px; height: 36px; background: #F1F8FF;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
        }
        .step span { font-size: 0.75rem; font-weight: bold; color: #444; }
        .step-arrow { color: #ccc; font-size: 0.8rem; margin-top: -15px; }
        .guide-sub-text { font-size: 0.75rem; color: #999; margin-top: 10px; letter-spacing: -0.5px; }

        /* =========================================
           5. ê¸¸ë“œ í˜ì´ì§€ (Guild Detail)
           ========================================= */
        .guild-banner-card {
            margin: 20px; padding: 25px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 25px; color: white; text-align: center;
            position: relative; box-shadow: 0 10px 20px rgba(30, 60, 114, 0.3); overflow: hidden;
        }
        .guild-banner-card::after {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("https://www.transparenttextures.com/patterns/cubes.png"); opacity: 0.1; pointer-events: none;
        }
        .guild-badge-wrapper {
            width: 60px; height: 60px; margin: 0 auto 10px; background: rgba(255,255,255,0.1);
            border-radius: 18px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.2);
        }
        .guild-badge-icon { font-size: 2rem; }
        .guild-main-name { font-size: 1.4rem; margin: 5px 0; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .guild-desc { font-size: 0.85rem; color: rgba(255,255,255,0.8); margin-bottom: 20px; font-style: italic; }
        
        .guild-stats-row { display: flex; justify-content: space-around; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 15px; }
        .g-stat { display: flex; flex-direction: column; }
        .g-stat .label { font-size: 0.7rem; color: rgba(255,255,255,0.6); }
        .g-stat .val { font-size: 0.95rem; font-weight: bold; }

        .guild-buff-container { display: flex; gap: 10px; overflow-x: auto; padding: 0 20px 10px 20px; }
        .buff-item {
            min-width: 130px; background: white; padding: 12px; border-radius: 15px;
            border: 1px solid #eee; display: flex; align-items: center; gap: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }
        .buff-item.locked { background: #f5f5f5; opacity: 0.7; }
        .buff-icon { font-size: 1.5rem; }
        .buff-info { display: flex; flex-direction: column; }
        .buff-info strong { font-size: 0.8rem; }
        .buff-info span { font-size: 0.7rem; color: #4A90E2; font-weight: bold; }

        .guild-mission-card { padding: 20px; }
        .mission-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .mission-tag { background: #FFF3E0; color: #EF6C00; font-size: 0.7rem; padding: 3px 8px; border-radius: 6px; font-weight: bold; }
        .mission-percent { color: #4A90E2; font-weight: 800; }
        .progress-container { width: 100%; height: 10px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #4A90E2, #64B5F6); border-radius: 10px; }
        .mission-reward { font-size: 0.8rem; color: #666; margin-bottom: 15px; }

        .chat-list { max-height: 150px; overflow-y: auto; background: #F8F9FA; border-radius: 10px; padding: 10px; margin-bottom: 10px; }
        .chat-msg { margin-bottom: 8px; font-size: 0.85rem; }
        .chat-user { font-weight: bold; color: #333; margin-right: 5px; }
        .chat-input-area { display: flex; gap: 5px; }
        .chat-input-area input { flex: 1; padding: 8px 12px; margin: 0; }
        .chat-input-area button { background: #4A90E2; color: white; border: none; border-radius: 10px; padding: 0 15px; font-weight: bold; cursor: pointer; }
        
        .member-li { display: flex; align-items: center; padding: 12px 10px; border-bottom: 1px solid #f5f5f5; }
        .m-avatar { width: 36px; height: 36px; border-radius: 12px; margin-right: 12px; background: #eee; }
        .m-info { flex: 1; display: flex; flex-direction: column; }
        .m-contribution { font-size: 0.75rem; color: #4A90E2; font-weight: bold; background: #E3F2FD; padding: 3px 8px; border-radius: 15px; }
        .btn-more-member { width: 100%; padding: 10px; background: none; border: none; color: #999; cursor: pointer; margin-top: 5px; }

        /* =========================================
           6. ë§ˆì´í˜ì´ì§€ (My Page & Settings)
           ========================================= */
/* --- ë§ˆì´í˜ì´ì§€ í”„ë¡œí•„ ë°°ë„ˆ (ê¹”ë”í•œ í™”ì´íŠ¸ + ì€ì€í•œ ì…ì²´ê°) --- */
.mypage-banner-card {
    margin: 20px;
    padding: 0;
    /* ì•„ì£¼ ì€ì€í•œ ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ì‚´ì§ ë³¼ë¡í•œ ëŠë‚Œ ì£¼ê¸° */
    background: linear-gradient(to bottom, #ffffff 40%, #f8f9fa 100%);
    border-radius: 25px;
    text-align: center;
    position: relative;
    /* ì´ì¤‘ ê·¸ë¦¼ìë¡œ ë” ê¹Šì´ ìˆëŠ” ì…ì²´ê° í‘œí˜„ */
    box-shadow: 
        0 5px 15px rgba(0, 0, 0, 0.05), /* ê°€ê¹Œìš´ ê·¸ë¦¼ì (ì„ ëª…) */
        0 15px 35px rgba(50, 50, 93, 0.1); /* ë¨¼ ê·¸ë¦¼ì (ë¶€ë“œëŸ¬ì›€) */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid #ffffff; /* í…Œë‘ë¦¬ë¥¼ ë°°ê²½ìƒ‰ê³¼ ë§ì¶° ë¹›ë°˜ì‚¬ ëŠë‚Œ */
}

/* ìƒë‹¨ ì¥ì‹ìš© ì»¬ëŸ¬ ë°” (ë™ì¼) */
.mypage-banner-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; width: 100%; height: 6px;
    background: linear-gradient(90deg, #4A90E2, #56CCF2);
    z-index: 5;
}

/* í”„ë¡œí•„ ì •ë³´ ì˜ì—­ */
.mp-banner-top {
    padding: 35px 20px 25px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.mp-banner-avatar {
    position: relative;
    width: 80px;
    height: 80px;
    margin-bottom: 12px;
    /* ì•„ë°”íƒ€ê°€ ì¹´ë“œ ìœ„ë¡œ ë¶• ëœ¬ ëŠë‚Œ */
    filter: drop-shadow(0 8px 15px rgba(0,0,0,0.15));
}

.mp-banner-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 25px;
    border: 3px solid #ffffff; /* í°ìƒ‰ í…Œë‘ë¦¬ë¡œ ì…ì²´ê° ê°•ì¡° */
    background: #fff;
}

.mp-banner-lvl {
    position: absolute;
    bottom: -6px;
    right: -6px;
    background: #333;
    color: #FFD700;
    font-size: 0.65rem;
    font-weight: 800;
    padding: 3px 8px;
    border-radius: 12px;
    border: 2px solid #fff;
    /* ë±ƒì§€ë„ ì…ì²´ì ìœ¼ë¡œ íŠ€ì–´ë‚˜ì˜¤ê²Œ */
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.mp-banner-info h2 {
    font-size: 1.4rem;
    margin: 5px 0;
    color: #222;
    font-weight: 800;
    /* í…ìŠ¤íŠ¸ì— ì•„ì£¼ ë¯¸ì„¸í•œ í•˜ì´ë¼ì´íŠ¸ */
    text-shadow: 0 1px 1px rgba(255,255,255,0.8);
}

.mp-class-badge {
    display: inline-block;
    background: #E3F2FD;
    color: #1565C0;
    font-size: 0.7rem;
    padding: 4px 12px;
    border-radius: 20px;
    font-weight: 700;
    margin-bottom: 5px;
    box-shadow: 0 2px 5px rgba(74, 144, 226, 0.15); /* ë±ƒì§€ ì…ì²´ê° */
}

.mp-desc {
    font-size: 0.85rem;
    color: #888;
    font-weight: 500;
}

/* í•˜ë‹¨ í†µê³„ ì˜ì—­ (ì‚´ì§ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°„ ëŠë‚Œ - Inset) */
.mp-stats-row {
    display: flex;
    justify-content: space-around;
    background: #FAFAFA;
    padding: 20px 0;
    /* ì•ˆìª½ ê·¸ë¦¼ìë¡œ ëˆŒë¦° ëŠë‚Œ êµ¬í˜„ */
    box-shadow: inset 0 3px 10px rgba(0,0,0,0.03);
    border-top: 1px solid #f0f0f0;
    margin-top: 10px;
    position: relative;
}

.mp-stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    position: relative;
}

/* êµ¬ë¶„ì„ ì— í•˜ì´ë¼ì´íŠ¸ ì¶”ê°€ */
.mp-stat:not(:last-child)::after {
    content: '';
    position: absolute;
    right: 0;
    top: 25%;
    height: 50%;
    width: 1px;
    background: #e0e0e0;
    border-right: 1px solid #fff; /* ì˜†ì— í°ì„ ì„ ë¶™ì—¬ ì…ì²´ê° */
}

.mp-stat .label {
    font-size: 0.7rem;
    color: #999;
    margin-bottom: 4px;
    font-weight: 500;
}

.mp-stat .val {
    font-size: 1rem;
    font-weight: 800;
    color: #333;
}
        .mp-profile-top { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; }
        .mp-avatar { position: relative; width: 90px; height: 90px; margin-bottom: 10px; }
        .mp-avatar img { width: 100%; height: 100%; object-fit: cover; border-radius: 25px; border: 3px solid #f8f9fa; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .mp-level-badge {
            position: absolute; bottom: -5px; right: -5px; background: #333; color: #FFD700;
            font-size: 0.7rem; padding: 3px 8px; border-radius: 10px; font-weight: bold; border: 2px solid white;
        }
        .mp-class-tag {
            display: inline-block; background: #E3F2FD; color: #4A90E2; font-size: 0.75rem;
            padding: 4px 10px; border-radius: 15px; font-weight: bold; margin-bottom: 5px;
        }
        #mypage-name { font-size: 1.4rem; color: #333; margin: 5px 0; }
        .mp-desc { color: #999; font-size: 0.85rem; }
        
        .mp-stats-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
            background: #F8F9FA; padding: 15px; border-radius: 15px;
        }
        .mp-stat-item { display: flex; flex-direction: column; align-items: center; }
        .mp-stat-item .label { font-size: 0.7rem; color: #aaa; margin-bottom: 3px; }
        .mp-stat-item .value { font-size: 0.95rem; font-weight: bold; color: #555; }

        .quick-action-row { display: flex; gap: 15px; margin: 0 20px; }
        .btn-quick-action {
            flex: 1; background: white; border: none; padding: 15px; border-radius: 20px;
            display: flex; flex-direction: column; align-items: center; gap: 8px;
            cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.03); transition: transform 0.2s;
        }
        .btn-quick-action:active { transform: scale(0.95); }
        .btn-quick-action .icon-box {
            font-size: 1.5rem; background: #F1F8FF; width: 45px; height: 45px;
            display: flex; align-items: center; justify-content: center; border-radius: 15px;
        }
        .btn-quick-action span { font-size: 0.85rem; font-weight: bold; color: #555; }

        .settings-group-title { margin: 25px 25px 10px 25px; font-size: 0.85rem; font-weight: bold; color: #999; }
        .menu-list-group {
            background: white; padding: 5px 20px !important; border-radius: 20px !important;
            border: none !important; margin: 0 20px !important; width: auto !important;
        }
        .menu-list-group .menu-item {
            padding: 16px 5px; border-bottom: 1px solid #f5f5f5;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer;
        }
        .menu-list-group .menu-item:last-child { border-bottom: none; }
        .menu-left { display: flex; align-items: center; gap: 12px; }
        .menu-icon { font-size: 1.1rem; }
        .menu-item span { font-size: 0.95rem; color: #444; font-weight: 500; }
        .menu-item .arrow { color: #ccc; font-size: 1.2rem; }
        .app-version-text { text-align: center; font-size: 0.75rem; color: #ccc; margin-top: 30px; font-family: monospace; }
        
        .menu-list {
            margin: 15px 20px; background: white; border-radius: 20px;
            overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        /* =========================================
           7. ì¶œì„ë¶€ (Attendance)
           ========================================= */
        .attendance-streak-banner {
            margin: 20px 20px 0 20px;
            background: linear-gradient(135deg, #FF9966 0%, #FF5E62 100%);
            border-radius: 15px; padding: 18px 20px; color: white;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 10px 20px rgba(255, 94, 98, 0.4);
            position: relative; overflow: hidden; animation: slideDown 0.5s ease;
        }
        .attendance-streak-banner::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(30deg); animation: shine-banner 3s infinite;
        }
        .streak-content { display: flex; align-items: center; gap: 10px; font-size: 1rem; z-index: 1; }
        .streak-content b { font-size: 1.2rem; color: #FFF; font-weight: 900; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .fire-icon { font-size: 1.5rem; animation: pulse-fire 1.5s infinite; }
        .streak-bonus { 
            font-size: 0.8rem; background: rgba(255, 255, 255, 0.25); color: white;
            padding: 6px 12px; border-radius: 20px; font-weight: bold;
            backdrop-filter: blur(5px); z-index: 1; border: 1px solid rgba(255,255,255,0.4);
        }

        .stamp-main-card {
            text-align: center; padding: 30px 20px; position: relative;
            background: #ffffff; border-radius: 20px; border: 1px solid #f0f0f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); min-height: 250px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin-bottom: 20px;
        }
        .stamp-header { display: flex; justify-content: center; align-items: center; gap: 8px; margin-bottom: 10px; width: 100%; }
        #attendance-date-title { font-size: 1.3rem; font-weight: 700; color: #333; margin: 0; }
        .today-badge { background: #4A90E2; color: white; font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; font-weight: 500; }
        
        .today-reward-text {
            font-size: 0.9rem; color: #666; background: #F8F9FA; padding: 6px 12px;
            border-radius: 8px; margin-bottom: 25px; display: inline-flex; align-items: center; gap: 5px;
        }
        .today-reward-text::before { content: 'ğŸ'; font-size: 1rem; }
        .today-reward-text b { color: #4A90E2 !important; }

        .stamp-btn-area {
            width: 140px; height: 140px; margin: 0 auto; background: #fff;
            border: 1px solid #e0e0e0; border-radius: 50%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            flex-shrink: 0; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .stamp-btn-area:active { transform: scale(0.98); background: #f5f5f5; }
        .stamp-btn-area.checked { border: 2px solid #4A90E2; background: #F0F7FF; box-shadow: none; }
        .stamp-btn-area.disabled { background: #f9f9f9; border-color: #eee; cursor: default; opacity: 0.6; }
        .stamp-icon-before { width: 40px; height: 40px; margin-bottom: 5px; opacity: 0.5; filter: grayscale(100%); }
        .stamped-mark img { width: 100px; height: auto; animation: stampIn 0.2s ease-out; }

        .sunday-list-container { padding: 0 20px 30px 20px; display: flex; flex-direction: column; gap: 10px; }
        .sunday-item {
            display: flex; align-items: center; justify-content: space-between;
            background: white; padding: 15px; border-radius: 12px;
            border: 1px solid #f0f0f0; transition: background 0.2s;
        }
        .sunday-left { display: flex; align-items: center; gap: 15px; }
        .s-date-box { display: flex; flex-direction: column; align-items: center; min-width: 40px; text-align: center; }
        .s-month { font-size: 0.65rem; color: #999; margin-bottom: 2px; }
        .s-day { font-size: 1.1rem; font-weight: 700; color: #444; line-height: 1; }
        
        .sunday-item.this-week { border: 1px solid #4A90E2; background: #fff; }
        .sunday-item.this-week .s-day { color: #4A90E2; }
        .status-icon { font-size: 0.8rem; font-weight: 500; color: #888; }
        #today-status-text { color: #4A90E2 !important; font-weight: bold; }

        /* =========================================
           8. í¬ì¸íŠ¸ ë‚´ì—­ (Point History)
           ========================================= */
        .point-summary-card {
            margin: 20px; padding: 25px;
            background: linear-gradient(135deg, #64B5F6 0%, #1976D2 100%);
            border-radius: 25px; color: white;
            box-shadow: 0 10px 25px rgba(25, 118, 210, 0.3);
            position: relative; overflow: hidden;
        }
        .point-summary-card::before {
            content: ''; position: absolute; top: -50%; right: -20%; width: 200px; height: 200px;
            background: rgba(255, 255, 255, 0.15); border-radius: 50%; pointer-events: none;
        }
        .total-point { font-size: 3rem; font-weight: 800; margin: 15px 0 25px 0; text-align: center; letter-spacing: -1px; }
        .total-point small { font-size: 1.2rem; font-weight: 500; opacity: 0.8; margin-left: 5px; }
        .point-card-bottom {
            display: flex; justify-content: space-around; align-items: center;
            background: rgba(0, 0, 0, 0.08); border-radius: 15px; padding: 12px;
            backdrop-filter: blur(5px);
        }
        .mini-stat { display: flex; flex-direction: column; align-items: center; font-size: 0.8rem; }
        .mini-stat strong { font-size: 1rem; font-weight: bold; }
        .divider { width: 1px; height: 25px; background: rgba(255, 255, 255, 0.3); }

        .history-filter-tabs { display: flex; gap: 10px; margin: 20px 20px 10px 20px; }
        .filter-tab {
            flex: 1; padding: 10px; border: none; border-radius: 12px;
            background: #f1f3f5; color: #888; font-weight: bold; cursor: pointer; transition: 0.2s;
        }
        .filter-tab.active { background: #4A90E2; color: white; box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3); }
        
        #point-history-list .menu-item { cursor: default; }
        .btn-load-more {
            display: block; width: calc(100% - 40px); margin: 15px 20px 30px 20px;
            padding: 12px; background: #fff; border: 1px solid #ddd; border-radius: 50px;
            color: #666; font-weight: bold; cursor: pointer;
        }

        /* =========================================
           9. ë„¤ë¹„ê²Œì´ì…˜ & ì•Œë¦¼ (Nav & Toast)
           ========================================= */
        .nav-bar {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 480px; background: #ffffff;
            display: flex; justify-content: space-around; align-items: center;
            padding: 8px 0 calc(env(safe-area-inset-bottom) + 8px);
            border-top: 1px solid #eeeeee; z-index: 1000;
        }
        .nav-item {
            border: none; background: none; color: #111; font-size: 0.7rem;
            cursor: pointer; flex: 1; display: flex; flex-direction: column;
            align-items: center; gap: 4px; -webkit-tap-highlight-color: transparent;
        }
        .nav-item img { width: 26px; height: 26px; opacity: 0.8; transition: transform 0.2s; }
        .nav-item.active { color: #2196F3; font-weight: bold; }
        .nav-item.active img {
            opacity: 1; transform: scale(1.05);
            filter: invert(47%) sepia(88%) saturate(1458%) hue-rotate(193deg) brightness(96%) contrast(92%);
        }

        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
        #toast-container {
            position: fixed; bottom: 90px; right: 20px; left: 20px;
            display: flex; flex-direction: column-reverse; gap: 12px;
            z-index: 10001; pointer-events: none;
        }
        .toast-item {
            position: relative; background: #ffffff; border-radius: 18px;
            padding: 16px 45px 16px 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            display: flex; align-items: center; gap: 12px; pointer-events: auto; border: 1px solid #eee;
            animation: toastSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .toast-item.success { border-left: 6px solid #4CAF50; }
        .toast-item.reward  { border-left: 6px solid #FFD700; background: #FFFDF0; }
        .toast-item.warning { border-left: 6px solid #FF5252; }
        .toast-item.info    { border-left: 6px solid #2196F3; }
        .toast-title { font-weight: 800; font-size: 0.95rem; color: #333; display: block; margin-bottom: 2px; }
        .toast-msg { font-size: 0.85rem; color: #666; line-height: 1.3; }
        .toast-close { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); border: none; background: none; font-size: 1.2rem; cursor: pointer; color: #ccc; }

        /* ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ */
        #custom-alert {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6); z-index: 9999; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease; backdrop-filter: blur(3px);
        }
        #custom-alert.active { display: flex !important; opacity: 1; }
        #custom-alert .card { max-width: 320px; text-align: center; padding: 30px; transform: scale(0.7); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #custom-alert.active .card { transform: scale(1); }
        #alert-icon { display: inline-block; animation: alert-float 2s ease-in-out infinite; }

        /* Keyframes */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shine-banner { 0% { transform: translateX(-100%) rotate(30deg); } 20%, 100% { transform: translateX(100%) rotate(30deg); } }
        @keyframes pulse-fire { 0% { transform: scale(1); } 50% { transform: scale(1.2) rotate(5deg); } 100% { transform: scale(1); } }
        @keyframes stampIn { from { transform: scale(1.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes alert-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes toastSlideIn { from { opacity: 0; transform: translateY(20px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes pulse-orange { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
    <div id="toast-container"></div>
    <div class="app-container">

        <div id="page-main" class="page active">
            <header>
                <div class="header-top">
                    <h1>ë´‰ë™ì¤‘ì•™êµíšŒ ì´ˆë“±ë¶€ RPG</h1>
                    <div class="header-actions">
                        <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ">
                            <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ">
                        </button>
                    </div>
                </div>
            </header>

            <div class="profile-card">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div class="profile-avatar-wrap">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/warrior.png" id="user-profile-img" alt="ë‚´ ìºë¦­í„°">
                    </div>
                    <div style="margin-left: 15px;">
                        <div style="display: flex; gap: 5px;">
                            <span class="user-rank-badge" style="background: #E3F2FD; color: #4A90E2;" id="user-grade-display">XXX ê¸¸ë“œ</span>
                            <span class="user-rank-badge" style="background: #FFF3E0; color: #EF6C00;"><span id="user-level">2,500</span> ë‹¬ë€íŠ¸</span>
                        </div>
                        <h2 id="user-display-name" style="font-size: 1.3rem; color: #333;">ì‹ ì… ìš©ì‚¬ë‹˜</h2>
                    </div>
                </div>

                <div style="background: #FAFBFC; padding: 12px; border-radius: 15px;">
                    <div style="display: flex; justify-content: space-between; font-size: 0.75rem; font-weight: bold; color: #777;">
                        <span>ì„±ì¥ ê²½í—˜ì¹˜ (EXP)</span>
                        <span><span id="current-exp">60</span> / 100</span>
                    </div>
                    <div class="exp-container">
                        <div id="exp-bar" class="exp-bar-fill" style="width: 60%;"></div>
                    </div>
                </div>
            </div>

            <div class="card" style="text-align: center;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <h4 style="margin:0;">ì˜¤ëŠ˜ì˜ ë§ì”€ ğŸ“–</h4>
                    <span style="font-size:0.7rem; color:#999;">ë§¤ì¼ 1íšŒ</span>
                </div>
                <p style="font-style:italic; min-height: 1.6em; margin-bottom: 15px; text-align: left;">
                    <span id="typing-bible">ë‚´ê²Œ ëŠ¥ë ¥ ì£¼ì‹œëŠ” ì ì•ˆì—ì„œ ë‚´ê°€ ëª¨ë“  ê²ƒì„ í•  ìˆ˜ ìˆëŠë‹ˆë¼</span>
                </p>
                <button id="btn-amen" class="btn-amen" onclick="handleAmen()">
                    ğŸ™ ì•„ë©˜! (ë¯¿ìŒ +1)
                </button>
            </div>

            <div class="guild-section">
                <div class="guild-header">
                    <div class="guild-name">
                        <h4 style="color: #4A90E2;">ğŸ›¡ï¸ ë‹¤ìœ—ì˜ ìš©ì‚¬ë“¤</h4>
                        <span class="guild-tag">LV.5</span>
                    </div>
                    <span style="font-size: 0.75rem; color: #666; font-weight: bold;">ê¸¸ë“œì› 12/20</span>
                </div>
                <div class="guild-member-list">
                    <div class="member-item">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/warrior.png" class="member-avatar">
                        <div class="member-info">
                            <div class="member-name">ê¹€ìš©ì‚¬ (ë‚˜) <span class="master-badge">MASTER</span></div>
                            <div class="member-status">ì˜¤ëŠ˜ë„ í€˜ìŠ¤íŠ¸ ì™„ë£Œ! ğŸ”¥</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.8rem; font-weight: bold; color: #4A90E2;">Lv.15</div>
                        </div>
                    </div>
                    <div class="member-item" style="opacity: 0.8;">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/wizard.png" class="member-avatar">
                        <div class="member-info">
                            <div class="member-name">ì´ë§ˆë²•</div>
                            <div class="member-status">ì ‘ì† ì¤‘</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.8rem; font-weight: bold; color: #4A90E2;">Lv.12</div>
                        </div>
                    </div>
                    <button style="width: 100%; padding: 10px; border: 1px dashed #DDD; background: none; border-radius: 15px; color: #999; font-size: 0.8rem; cursor: pointer;">
                        + ê¸¸ë“œì› ë”ë³´ê¸°
                    </button>
                </div>
            </div>

            <div class="card" style="margin-top:15px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="margin: 0;">ê³µì§€ì‚¬í•­ ğŸ“¢</h4>
                    <span style="font-size: 0.7rem; color: var(--gray); cursor: pointer;" onclick="showPage('page-notice-detail')">ì „ì²´ë³´ê¸° ></span>
                </div>
                <div class="notice-list">
                    <div class="notice-item" onclick="showPage('page-notice-detail')">
                        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 4px;">
                            <span style="background: #FFEBEB; color: #FF4D4D; font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;">ì¤‘ìš”</span>
                            <span style="font-size: 0.9rem; font-weight: 700; color: #333;">ì´ë²ˆ ì£¼ ì£¼ì¼ ì•¼ì™¸ í™œë™ ì•ˆë‚´</span>
                        </div>
                        <p style="font-size: 0.8rem; color: #777; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">êµíšŒ ê·¼ì²˜ ê³µì›ì—ì„œ ë³´ë¬¼ì°¾ê¸°ê°€ ì§„í–‰ë©ë‹ˆë‹¤!</p>
                    </div>
                    <div class="notice-item" onclick="showPage('page-notice-detail')">
                        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 4px;">
                            <span style="background: #E3F2FD; color: #2196F3; font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;">ì•ˆë‚´</span>
                            <span style="font-size: 0.9rem; font-weight: 700; color: #333;">ìƒˆ ì¹œêµ¬ í™˜ì˜ íŒŒí‹° (ë‹¤ìŒ ì£¼)</span>
                        </div>
                        <p style="font-size: 0.8rem; color: #777; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">ìƒˆë¡œ ì˜¨ ì¹œêµ¬ë“¤ì„ ìœ„í•´ ë§›ìˆëŠ” ê°„ì‹ì´ ì¤€ë¹„ë˜ì–´ ìˆì–´ìš”.</p>
                    </div>
                    <div class="notice-item" onclick="showPage('page-notice-detail')">
                        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 4px;">
                            <span style="background: #F5F5F5; color: #666; font-size: 0.65rem; padding: 2px 6px; border-radius: 4px; font-weight: bold;">í•„ë…</span>
                            <span style="font-size: 0.9rem; font-weight: 700; color: #333;">ë‹¬ë€íŠ¸ ì‹œì¥ ê°œìµœ ê³µì§€</span>
                        </div>
                        <p style="font-size: 0.8rem; color: #777; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">ì—´ì‹¬íˆ ëª¨ì€ ë‹¬ë€íŠ¸ë¥¼ ì‚¬ìš©í•  ì‹œê°„ì´ ì™”ìŠµë‹ˆë‹¤!</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-notice-detail" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-main')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ê³µì§€ì‚¬í•­</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>
            <div class="card" style="padding: 25px;">
                <span style="color: #2196F3; font-weight: bold; font-size: 0.8rem;">[ì•¼ì™¸ í™œë™ ì•ˆë‚´]</span>
                <h4 style="font-size:1.3rem; margin: 10px 0; text-align: left;">ì´ë²ˆ ì£¼ ì£¼ì¼ ì•¼ì™¸ í™œë™ ì•ˆë‚´</h4>
                <div style="width: 100%; height: 1px; background: #eee; margin: 15px 0;"></div>
                <p style="color:#555; font-size:1rem; line-height: 1.8;">
                    ì•ˆë…•í•˜ì„¸ìš”, ìš©ì‚¬ ì—¬ëŸ¬ë¶„!<br><br>
                    ì´ë²ˆ ì£¼ ì£¼ì¼ì—ëŠ” êµíšŒ ê·¼ì²˜ ê³µì›ì—ì„œ <b>'ë§ì”€ ë³´ë¬¼ì°¾ê¸°'</b>ê°€ ì§„í–‰ë©ë‹ˆë‹¤. <br><br>
                    ì¤€ë¹„ë¬¼: í¸í•œ ì˜·ì°¨ë¦¼, ìš´ë™í™”, ê°œì¸ ë¬¼í†µ<br>
                    ì¼ì‹œ: ì´ë²ˆ ì£¼ ì£¼ì¼ 11ì‹œ ì˜ˆë°° í›„<br><br>
                    ë³´ë¬¼ì„ ë§ì´ ì°¾ëŠ” ìš©ì‚¬ì—ê²ŒëŠ” íŠ¹ë³„í•œ ë‹¬ë€íŠ¸ ë³´ìƒì´ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë‹ˆ ê¸°ëŒ€í•´ ì£¼ì„¸ìš”!
                </p>
                <button class="btn btn-main" onclick="showPage('page-main')">ëª©ë¡ìœ¼ë¡œ</button>
            </div>
        </div>

        <div id="page-attendance" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-main')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ì£¼ì¼ ì¶œì„ë¶€</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>

            <div class="attendance-streak-banner">
                <div class="streak-content">
                    <span class="fire-icon">ğŸ”¥</span>
                    <span>í˜„ì¬ <b>3ì£¼ ì—°ì†</b> ê°œê·¼ ì¤‘!</span>
                </div>
                <div class="streak-bonus">ê°œê·¼ìƒ ë„ì „!</div>
            </div>

            <div class="card stamp-main-card">
                <div class="stamp-header">
                    <h3 id="attendance-date-title">2ì›” 1ì£¼ì°¨</h3>
                    <span class="today-badge" id="sunday-badge" style="display:none;">ì˜¤ëŠ˜ì€ ì£¼ì¼!</span>
                </div>
                
                <p class="today-reward-text">ì£¼ì¼ ì˜ˆë°° ì¶œì„ ë³´ìƒ: <b style="color:#FFD700">100 P</b></p>
                
                <div id="btn-attendance-check" class="stamp-btn-area" onclick="handleSundayAttendance()">
                    <div class="stamp-inner-content">
                        <img src="https://cdn-icons-png.flaticon.com/512/2919/2919600.png" class="stamp-icon-before" alt="êµíšŒ">
                        <span class="stamp-guide-text" id="stamp-guide-msg">ì£¼ì¼ ì˜ˆë°°<br>ì™”ì–´ìš”!</span>
                    </div>
                    <div class="stamped-mark" style="display:none;">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/attendance.png" alt="ì°¸ì˜í–ˆì–´ìš”">
                    </div>
                </div>
                <p style="font-size: 0.8rem; color: #999; margin-top: 15px;">
                    * ë§¤ì£¼ ì¼ìš”ì¼, êµíšŒì— ì™€ì„œ ë„ì¥ì„ ê¾¹! ëˆŒëŸ¬ì£¼ì„¸ìš”.
                </p>
            </div>

            <div class="section-title">ğŸ“… 2ì›”ì˜ ì£¼ì¼(Sunday)</div>
            <div class="sunday-list-container" id="sunday-list-container">
                </div>
        </div>

        <div id="page-quest" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-main')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>í€˜ìŠ¤íŠ¸ ë³´ë“œ</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>

            <div class="quest-guide-box">
                <div class="guide-title">ğŸ’¡ í€˜ìŠ¤íŠ¸ ì§„í–‰ ë°©ë²•</div>
                <div class="guide-steps">
                    <div class="step">
                        <div class="step-icon">ğŸƒ</div>
                        <span>ë¯¸ì…˜ ì‹¤ì²œ</span>
                    </div>
                    <div class="step-arrow">â–¶</div>
                    <div class="step">
                        <div class="step-icon">ğŸŸ§</div>
                        <span>ìŠ¹ì¸ ìš”ì²­</span>
                    </div>
                    <div class="step-arrow">â–¶</div>
                    <div class="step">
                        <div class="step-icon">ğŸ</div>
                        <span>ë³´ìƒ íšë“</span>
                    </div>
                </div>
                <p class="guide-sub-text">
                    * ë¶€ëª¨ë‹˜(ì„ ìƒë‹˜)ì´ í™•ì¸í•˜ë©´ ì™„ë£Œë©ë‹ˆë‹¤!
                </p>
            </div>

            <div class="section-title">ğŸŒ ë§¤ì¼ë§¤ì¼ ì„±ì¥í•˜ê¸° (Daily)</div>
            <div class="card quest-card daily-theme">
                <div class="q-item" data-id="d1" data-reward="50">
                    <div class="q-icon-box">ğŸ™</div>
                    <div class="q-content">
                        <div class="q-title">ì•„ì¹¨ì— ì¼ì–´ë‚˜ì„œ ê¸°ë„í•˜ê¸°</div>
                        <div class="q-desc">í•˜ë£¨ì˜ ì‹œì‘ì„ í•˜ë‚˜ë‹˜ê³¼ í•¨ê»˜!</div>
                        <div class="q-reward-tag">50 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
                <div class="q-item" data-id="d2" data-reward="50">
                    <div class="q-icon-box">ğŸ“–</div>
                    <div class="q-content">
                        <div class="q-title">ì„±ê²½ ë§ì”€ 1ì¥ ì½ê¸°</div>
                        <div class="q-desc">ì˜¤ëŠ˜ì˜ ì–‘ì‹ì„ ì„­ì·¨í•´ìš”</div>
                        <div class="q-reward-tag">50 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
                <div class="q-item" data-id="d3" data-reward="50">
                    <div class="q-icon-box">ğŸ’–</div>
                    <div class="q-content">
                        <div class="q-title">ë¶€ëª¨ë‹˜ ì•ˆë§ˆ í•´ë“œë¦¬ê¸°</div>
                        <div class="q-desc">íš¨ë„ëŠ” í•˜ë‚˜ë‹˜ì˜ ëª…ë ¹!</div>
                        <div class="q-reward-tag">50 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
            </div>

            <div class="section-title">â›ª ê±°ë£©í•œ ì£¼ì¼ ì§€í‚¤ê¸° (Sunday)</div>
            <div class="card quest-card sunday-theme">
                <div id="sunday-lock-overlay" style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.85); z-index:10; border-radius:25px; display:flex; flex-direction:column; align-items:center; justify-content:center; backdrop-filter: blur(2px);">
                    <div style="font-size:2.5rem; margin-bottom:10px;">ğŸ”’</div>
                    <p style="font-size:1rem; font-weight:bold; color:#555;">ì£¼ì¼(ì¼ìš”ì¼)ì— ì—´ë¦½ë‹ˆë‹¤!</p>
                    <small style="color:#888;">ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</small>
                </div>

                <div class="q-item" data-id="s1" data-reward="100">
                    <div class="q-icon-box sunday">ğŸ’’</div>
                    <div class="q-content">
                        <div class="q-title">ì£¼ì¼ ì˜ˆë°° ì§€ê°í•˜ì§€ ì•Šê¸°</div>
                        <div class="q-desc">10ë¶„ ì „ì— ìë¦¬ì— ì•‰ì•„ìš”</div>
                        <div class="q-reward-tag sunday">100 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
                <div class="q-item" data-id="s2" data-reward="50">
                    <div class="q-icon-box sunday">ğŸ’Œ</div>
                    <div class="q-content">
                        <div class="q-title">ì •ì„±ê» í—Œê¸ˆ ì¤€ë¹„í•˜ê¸°</div>
                        <div class="q-desc">ê°ì‚¬í•˜ëŠ” ë§ˆìŒì„ ë‹´ì•„ìš”</div>
                        <div class="q-reward-tag sunday">50 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
                <div class="q-item" data-id="s3" data-reward="100">
                    <div class="q-icon-box sunday">ğŸ—£ï¸</div>
                    <div class="q-content">
                        <div class="q-title">ì´ë²ˆ ì£¼ ìš”ì ˆ ì•”ì†¡í•˜ê¸°</div>
                        <div class="q-desc">ì„ ìƒë‹˜ ì•ì—ì„œ ì™¸ì›Œë³´ì„¸ìš”!</div>
                        <div class="q-reward-tag sunday">100 P</div>
                    </div>
                    <button class="btn-quest-action state-ready" onclick="handleQuestClick(this)">ë„ì „</button>
                </div>
            </div>
            <div style="height: 20px;"></div>
        </div>

        <div id="page-guild" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-main')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ê¸¸ë“œ ë³¸ë¶€</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>

            <div class="guild-banner-card">
                <div class="guild-badge-wrapper">
                    <div class="guild-badge-icon">ğŸ›¡ï¸</div>
                </div>
                <h2 class="guild-main-name">ë‹¤ìœ—ì˜ ìš©ì‚¬ë“¤</h2>
                <p class="guild-desc">"ë‘ë ¤ì›Œ ë§ê³  ë¯¿ìŒìœ¼ë¡œ ë‚˜ì•„ê°€ì!"</p>
                <div class="guild-stats-row">
                    <div class="g-stat">
                        <span class="label">ê¸¸ë“œì›</span>
                        <span class="val">12/20</span>
                    </div>
                    <div class="g-stat">
                        <span class="label">ë­í‚¹</span>
                        <span class="val">3ìœ„</span>
                    </div>
                    <div class="g-stat">
                        <span class="label">í¬ì¸íŠ¸</span>
                        <span class="val">15,400</span>
                    </div>
                </div>
            </div>

            <div class="section-title">âœ¨ ìš°ë¦¬ ê¸¸ë“œ íš¨ê³¼ (ë²„í”„)</div>
            <div class="guild-buff-container">
                <div class="buff-item active">
                    <div class="buff-icon">ğŸ’°</div>
                    <div class="buff-info">
                        <strong>ë‹¬ë€íŠ¸ ë³´ë„ˆìŠ¤</strong>
                        <span>íšë“ëŸ‰ +5%</span>
                    </div>
                </div>
                <div class="buff-item active">
                    <div class="buff-icon">âš”ï¸</div>
                    <div class="buff-info">
                        <strong>ê²½í—˜ì¹˜ ë¶€ìŠ¤íŠ¸</strong>
                        <span>ì„±ì¥ì†ë„ +10%</span>
                    </div>
                </div>
                <div class="buff-item locked" onclick="showToast('ì ê¹€', 'ê¸¸ë“œ ë ˆë²¨ 10 ë‹¬ì„± ì‹œ í•´ì œë©ë‹ˆë‹¤.', 'warning')">
                    <div class="buff-icon">ğŸ”’</div>
                    <div class="buff-info">
                        <strong>ë ˆë²¨ 10 í•´ê¸ˆ</strong>
                        <span>???</span>
                    </div>
                </div>
            </div>

            <div class="section-title">ğŸ”¥ ì´ë²ˆ ì£¼ í˜‘ë™ ë¯¸ì…˜</div>
            <div class="card guild-mission-card">
                <div class="mission-header">
                    <span class="mission-tag">ì§„í–‰ ì¤‘</span>
                    <span class="mission-percent">75%</span>
                </div>
                <h4>í•¨ê»˜ ì„±ê²½ 100ì¥ ì½ê¸°</h4>
                <div class="progress-container">
                    <div class="progress-bar" style="width: 75%;"></div>
                </div>
                <p class="mission-reward">ğŸ ì™„ë£Œ ì‹œ ì „ì› <b>500 ë‹¬ë€íŠ¸</b> ì§€ê¸‰!</p>
                <button class="btn btn-sub btn-contribute" onclick="handleGuildContribute()">
                    ğŸ™Œ ë‚˜ë„ ê¸°ì—¬í•˜ê¸° (ë§ì”€ ì½ê¸°)
                </button>
            </div>

            <div class="section-title">ğŸ’¬ ê¸¸ë“œì› ì‘ì›ë°©</div>
            <div class="card chat-card">
                <div id="guild-chat-list" class="chat-list">
                    <div class="chat-msg">
                        <span class="chat-user">ê¹€í•˜ëŠ˜:</span>
                        <span class="chat-text">ì˜¤ëŠ˜ ë¯¸ì…˜ ë‹¤ë“¤ í–ˆì–´? í™”ì´íŒ…!</span>
                    </div>
                    <div class="chat-msg">
                        <span class="chat-user">ì´ë¯¿ìŒ:</span>
                        <span class="chat-text">ì‘! ë‚˜ë„ ë°©ê¸ˆ ì™„ë£Œí–ˆì–´ ã…ã…</span>
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="guild-chat-input" placeholder="ì‘ì› ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!">
                    <button onclick="sendGuildChat()">ì „ì†¡</button>
                </div>
            </div>

            <div class="section-title" style="margin-top: 20px;">ğŸ‘¥ ê¸¸ë“œ ë©¤ë²„</div>
            <div class="card" style="padding: 10px;">
                <ul class="guild-member-ul">
                    <li class="member-li">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/warrior.png" class="m-avatar">
                        <div class="m-info">
                            <strong>ê¹€ìš©ì‚¬ (ë‚˜)</strong>
                            <span class="m-role master">ê¸¸ë“œì¥</span>
                        </div>
                        <div class="m-contribution">ê¸°ì—¬ë„ 1ë“± ğŸ‘‘</div>
                    </li>
                    <li class="member-li">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/healer.png" class="m-avatar">
                        <div class="m-info">
                            <strong>ì´ë¯¿ìŒ</strong>
                            <span class="m-role">ê¸¸ë“œì›</span>
                        </div>
                        <div class="m-contribution">ê¸°ì—¬ë„ 340</div>
                    </li>
                    <li class="member-li">
                        <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/wizard.png" class="m-avatar">
                        <div class="m-info">
                            <strong>ë°•ì§€í˜œ</strong>
                            <span class="m-role">ê¸¸ë“œì›</span>
                        </div>
                        <div class="m-contribution">ê¸°ì—¬ë„ 210</div>
                    </li>
                </ul>
                <button class="btn-more-member">ğŸ”½ ì „ì²´ ë©¤ë²„ ë³´ê¸°</button>
            </div>
        </div>

        <div id="page-mypage" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-main')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ì„¤ì • / ë‚´ ì •ë³´</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>

            <div class="mypage-banner-card">
				<div class="mp-banner-top">
					<div class="mp-banner-avatar">
						<img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/avatar/warrior.png" id="mypage-img" alt="ë‚´ ìºë¦­í„°">
						<div class="mp-banner-lvl">LV.1</div>
					</div>
					<div class="mp-banner-info">
						<div class="mp-class-badge">âš”ï¸ ì „ì‚¬ (Warrior)</div>
						<h2 id="mypage-name">ì‹ ì… ìš©ì‚¬ë‹˜</h2>
						<p class="mp-desc">ë´‰ë™ì¤‘ì•™êµíšŒ ì´ˆë“±ë¶€ 1í•™ë…„ 1ë°˜</p>
					</div>
				</div>
				
				<div class="mp-stats-row">
					<div class="mp-stat">
						<span class="label">ë³´ìœ  ë‹¬ë€íŠ¸</span>
						<span class="val" style="color: #FBC02D;">2,500 P</span>
					</div>
					<div class="mp-stat">
						<span class="label">ëˆ„ì  ì¶œì„</span>
						<span class="val">12ì¼</span>
					</div>
					<div class="mp-stat">
						<span class="label">ì™„ë£Œ í€˜ìŠ¤íŠ¸</span>
						<span class="val">45ê°œ</span>
					</div>
				</div>
			</div>

            <div class="quick-action-row">
                <button class="btn-quick-action" onclick="showPage('page-qrcode')">
                    <div class="icon-box">ğŸ”</div>
                    <span>QR ì²´í¬ì¸</span>
                </button>
                <button class="btn-quick-action" onclick="showPage('page-point-history')">
                    <div class="icon-box">ğŸ’°</div>
                    <span>í¬ì¸íŠ¸ ë‚´ì—­</span>
                </button>
            </div>

            <div class="settings-group-title">ê³„ì • ê´€ë¦¬</div>
            <div class="card menu-list-group">
                <div class="menu-item" onclick="showPage('page-name-change')">
                    <div class="menu-left">
                        <span class="menu-icon">ğŸ·ï¸</span>
                        <span>ìºë¦­í„° ì´ë¦„ ë³€ê²½</span>
                    </div>
                    <span class="arrow">â€º</span>
                </div>
                <div class="menu-item" onclick="showPage('page-password-change')">
                    <div class="menu-left">
                        <span class="menu-icon">ğŸ”</span>
                        <span>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</span>
                    </div>
                    <span class="arrow">â€º</span>
                </div>
                <div class="menu-item" onclick="showToast('ì¤€ë¹„ ì¤‘', 'ìºë¦­í„° ê¾¸ë¯¸ê¸°ëŠ” ê³§ ì˜¤í”ˆë©ë‹ˆë‹¤!', 'info')">
                    <div class="menu-left">
                        <span class="menu-icon">ğŸ›¡ï¸</span>
                        <span>ì•„ë°”íƒ€ ë³€ê²½ (ì¤€ë¹„ì¤‘)</span>
                    </div>
                    <span class="arrow">â€º</span>
                </div>
            </div>

            <div class="settings-group-title">ì•± ì„¤ì •</div>
            <div class="card menu-list-group">
                <div class="menu-item" onclick="window.open('https://church-website.com', '_blank')">
                    <div class="menu-left">
                        <span class="menu-icon">ğŸ“¢</span>
                        <span>ê³µì§€ì‚¬í•­ / í™ˆí˜ì´ì§€</span>
                    </div>
                    <span class="arrow">â€º</span>
                </div>
                <div class="menu-item" onclick="handleLogout()">
                    <div class="menu-left">
                        <span class="menu-icon">ğŸšª</span>
                        <span style="color: #FF5252;">ë¡œê·¸ì•„ì›ƒ</span>
                    </div>
                    <span class="arrow">â€º</span>
                </div>
            </div>
            <div class="app-version-text">ë´‰ë™ì¤‘ì•™êµíšŒ ì´ˆë“±ë¶€ RPG Ver 1.0.0</div>
            <div style="height: 20px;"></div>
        </div>

        <div id="page-qrcode" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-mypage')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ë‚˜ì˜ QRì½”ë“œ</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>
            <div class="card" style="margin-top: 30px; text-align: center; padding: 40px 20px;">
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #333; margin-bottom: 5px;" id="qr-user-name">ì‹ ì… ìš©ì‚¬ë‹˜</h4>
                    <p style="font-size: 0.85rem; color: #888;">ì¶œì„ì²´í¬ë‚˜ ë‹¬ë€íŠ¸ ì‹œì¥ì—ì„œ ë³´ì—¬ì£¼ì„¸ìš”!</p>
                </div>
                <div style="background: white; padding: 15px; display: inline-block; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 25px;">
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=BongdongUser" id="user-qr-image" alt="QR Code" style="width: 180px; height: 180px; display: block;">
                </div>
                <p style="font-size: 0.8rem; color: #999; line-height: 1.5;">
                    ì„ ìƒë‹˜ê»˜ ì´ í™”ë©´ì„ ë³´ì—¬ë“œë¦¬ë©´<br>ë¹ ë¥´ê²Œ ì¶œì„ í™•ì¸ì„ í•  ìˆ˜ ìˆì–´ìš”! ğŸ›¡ï¸
                </p>
            </div>
        </div>

        <div id="page-name-change" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-mypage')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ìºë¦­í„°ëª… ë³€ê²½</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                </div>
            </div>
            <div class="card" style="margin-top: 20px;">
                <div style="text-align: center; margin-bottom: 25px;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ·ï¸</div>
                    <p style="color: #666; font-size: 0.9rem;">ëª¨í—˜ê°€ë‹˜ì˜ ìƒˆë¡œìš´ ì´ë¦„ì„ ì •í•´ì£¼ì„¸ìš”!<br>ì´ë¦„ì€ ì–¸ì œë“ ì§€ ë‹¤ì‹œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <div style="margin-bottom: 25px;">
                    <label style="font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 5px; margin-left: 5px;">ìƒˆë¡œìš´ ìºë¦­í„°ëª…</label>
                    <input type="text" id="new-character-name" placeholder="2~8ì ì‚¬ì´ë¡œ ì…ë ¥í•´ ì£¼ì„¸ìš”" maxlength="8">
                </div>
                <button class="btn btn-main" onclick="handleNameChange()">ë³€ê²½í•˜ê¸°</button>
            </div>
        </div>

        <div id="page-point-history" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-mypage')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>í¬ì¸íŠ¸ ë‚´ì—­</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>

            <div class="point-summary-card">
                <div class="point-card-top">
                    <span class="card-label">í˜„ì¬ ë³´ìœ  ë‹¬ë€íŠ¸</span>
                </div>
                <div class="point-amount-wrap">
                    <h2 class="total-point">
                        <span class="sub-money">2,500</span> <small>P</small>
                    </h2>
                </div>
                <div class="point-card-bottom">
                    <div class="mini-stat">
                        <span>ì´ë²ˆ ì£¼ íšë“</span>
                        <strong>+150 P</strong>
                    </div>
                    <div class="divider"></div>
                    <div class="mini-stat">
                        <span>ì´ë²ˆ ì£¼ ì‚¬ìš©</span>
                        <strong style="color: #FFCDD2;">-500 P</strong>
                    </div>
                </div>
            </div>

            <div class="history-filter-tabs">
                <button class="filter-tab active" onclick="setHistoryFilter('all')">ì „ì²´</button>
                <button class="filter-tab" onclick="setHistoryFilter('earn')">ì ë¦½ (+)</button>
                <button class="filter-tab" onclick="setHistoryFilter('use')">ì‚¬ìš© (-)</button>
            </div>
            <div class="menu-list" id="point-history-list" style="min-height: 200px;"></div>
            <button id="btn-load-more" class="btn-load-more" onclick="loadMoreHistory()">ğŸ‘‡ ë” ë³´ê¸° (More)</button>
        </div>

        <div id="page-password-change" class="page">
            <div class="sub-header">
                <div class="sub-header-left">
                    <button class="btn-back-game" onclick="showPage('page-mypage')">
                        <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="ë’¤ë¡œ">
                    </button>
                    <h2>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
                </div>
                <div class="sub-header-info">
                    <div class="sub-info-badge">Lv.<span class="sub-lvl">1</span></div>
                    <div class="sub-info-badge money"><span class="sub-money">2500</span> P</div>
                    <button class="icon-btn btn-logout-new" onclick="handleLogout()" title="ë¡œê·¸ì•„ì›ƒ" style="width: 28px; height: 28px; margin-right: 10px; background: rgba(255,255,255,0.15);">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828445.png" alt="ë¡œê·¸ì•„ì›ƒ" style="width: 14px; height: 14px;">
                    </button>
                </div>
            </div>
            <div class="card" style="margin-top: 20px;">
                <div style="text-align: center; margin-bottom: 25px;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">ğŸ”</div>
                    <p style="color: #666; font-size: 0.9rem;">ì•ˆì „í•œ ëª¨í—˜ì„ ìœ„í•´<br>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ë³€ê²½í•´ ì£¼ì„¸ìš”!</p>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 5px; margin-left: 5px;">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="current-pw" placeholder="ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 5px; margin-left: 5px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="new-pw" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
                </div>
                <div style="margin-bottom: 25px;">
                    <label style="font-size: 0.85rem; font-weight: bold; color: #555; display: block; margin-bottom: 5px; margin-left: 5px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" id="new-pw-confirm" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥">
                </div>
                <button class="btn btn-main" onclick="handlePasswordChange()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì™„ë£Œ</button>
            </div>
        </div>

        <nav class="nav-bar" id="bottom-nav">
            <button class="nav-item active" onclick="showPage('page-main')">
                <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/navi/home.png">
                <span>í™ˆ</span>
            </button>
            <button class="nav-item" onclick="showPage('page-attendance')">
                <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/navi/stamp.png">
                <span>ì¶œì„</span>
            </button>
            <button class="nav-item" onclick="showPage('page-guild')">
                <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/navi/guild.png">
                <span>ê¸¸ë“œ</span>
            </button>
            <button class="nav-item" onclick="showPage('page-quest')">
                <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/navi/quest.png">
                <span>í€˜ìŠ¤íŠ¸</span>
            </button>
            <button class="nav-item" onclick="showPage('page-mypage')">
                <img src="https://cdn.jsdelivr.net/gh/ysrim/bjcc_ss@main/images/navi/settings.png">
                <span>ì„¤ì •</span>
            </button>
        </nav>
    </div>

    <div id="custom-alert">
        <div class="card" style="max-width:320px; text-align:center; padding:30px; transform: scale(0.9); transition: transform 0.2s;">
            <div id="alert-icon" style="font-size: 3rem; margin-bottom: 15px;">âœ¨</div>
            <h4 id="alert-title" style="margin-bottom: 10px; color: var(--secondary);">ì•Œë¦¼</h4>
            <p id="alert-message" style="font-size: 0.95rem; color: #666; margin-bottom: 25px; line-height: 1.5; word-break: keep-all;"></p>
            <button class="btn btn-main" onclick="closeAlert()" style="margin-top:0;">í™•ì¸</button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        let currentTalent = 2500;

        // í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜
        function showPage(pageId) {
            $('.page').hide();
            $('#' + pageId).show();
            $('#bottom-nav').css('display', 'flex');

            // --- ê²½í—˜ì¹˜ ë°” ì• ë‹ˆë©”ì´ì…˜ ë¡œì§ ---
            if (pageId === 'page-main') {
                const targetExp = $('#current-exp').text(); 
                const totalExp = 100; 
                const percentage = (targetExp / totalExp) * 100;

                $('#exp-bar').css('width', '0%');
                setTimeout(() => {
                    $('#exp-bar').css('width', percentage + '%');
                }, 100);

                typeBible();
            }
            
            $('.nav-item').removeClass('active');
            if (pageId === 'page-main') $('.nav-item').eq(0).addClass('active');
            if (pageId === 'page-attendance'){
                initSundayAttendance();
                $('.nav-item').eq(1).addClass('active');
            }
            if (pageId === 'page-guild') $('.nav-item').eq(2).addClass('active');
            if (pageId === 'page-quest'){
                initQuestPage();
                $('.nav-item').eq(3).addClass('active');
            }
            if (pageId === 'page-mypage') $('.nav-item').eq(4).addClass('active');
            if (pageId === 'page-point-history') { setHistoryFilter('all'); }
        }

        // ë‹¬ë€íŠ¸ ì¹´ìš´íŒ… ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        function updateTalent(amount) {
            let $subDisplay = $('.sub-money, #user-level'); 

            let startValue = currentTalent;
            let endValue = currentTalent + amount;

            $({val: startValue}).animate({val: endValue}, {
                duration: 800,
                easing: 'swing',
                step: function () {
                    let formatted = Math.floor(this.val).toLocaleString();
                    $subDisplay.text(formatted);
                },
                complete: function () {
                    currentTalent = endValue;
                    $subDisplay.text(currentTalent.toLocaleString());
                }
            });
        }

        function showAlert(msg, icon = 'âœ¨', title = 'ì•Œë¦¼') {
            $('#alert-message').html(msg);
            $('#alert-icon').html(icon);
            $('#alert-title').text(title);
            $('#custom-alert').addClass('active');
        }

        function closeAlert() {
            $('#custom-alert').removeClass('active');
        }

        $(document).ready(function () {
            $('#current-date').text(
                new Date().toLocaleDateString('ko-KR', {year: 'numeric', month: 'long', day: 'numeric'}));
            // ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜ ë“±
            updateTalent(0); 
        });

        const bibleText = "ë‚´ê²Œ ëŠ¥ë ¥ ì£¼ì‹œëŠ” ì ì•ˆì—ì„œ ë‚´ê°€ ëª¨ë“  ê²ƒì„ í•  ìˆ˜ ìˆëŠë‹ˆë¼";
        let typingIdx = 0;
        let isTyping = false; 

        function typeBible() {
            if (isTyping) return; 

            const $target = $('#typing-bible');
            $target.text(""); 
            typingIdx = 0;
            isTyping = true;

            function typing() {
                if (typingIdx < bibleText.length) {
                    $target.append(bibleText[typingIdx]);
                    typingIdx++;
                    setTimeout(typing, 100); 
                } else {
                    isTyping = false; 
                }
            }
            typing();
        }

        function handleLogout(){
            location.href = 'intro.html';
        }

        function handlePasswordChange() {
            const currentPw = $('#current-pw').val();
            const newPw = $('#new-pw').val();
            const newPwConfirm = $('#new-pw-confirm').val();

            if (!currentPw || !newPw || !newPwConfirm) {
                showAlert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'âš ï¸', 'ì…ë ¥ ì˜¤ë¥˜');
                return;
            }
            if (newPw !== newPwConfirm) {
                showAlert('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì„œë¡œ ì¼ì¹˜í•˜ì§€ ì•Šì•„ìš”.', 'âŒ', 'í™•ì¸ ì‹¤íŒ¨');
                return;
            }
            if (newPw.length < 4) {
                showAlert('ë¹„ë°€ë²ˆí˜¸ëŠ” 4ìë¦¬ ì´ìƒìœ¼ë¡œ í•´ì£¼ì„¸ìš”!', 'ğŸ”‘', 'ë³´ì•ˆ ì•½í•¨');
                return;
            }
            showAlert('ë¹„ë°€ë²ˆí˜¸ê°€ ì•ˆì „í•˜ê²Œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!<br>ìƒˆë¡œìš´ ë§ˆìŒìœ¼ë¡œ ëª¨í—˜ì„ ë– ë‚˜ë³¼ê¹Œìš”?', 'âœ¨', 'ë³€ê²½ ì™„ë£Œ');
            $('#current-pw, #new-pw, #new-pw-confirm').val('');
            showPage('page-mypage');
        }

        function showToast(title, msg, type = 'info') {
            const id = Date.now();
            const icons = { success: 'âœ…', reward: 'ğŸ’°', warning: 'âš ï¸', info: 'ğŸ“¢' };
            const icon = icons[type] || 'ğŸ””';

            const toastHtml = `
                <div class="toast-item ${type}" id="toast-${id}">
                    <div class="toast-icon">${icon}</div>
                    <div class="toast-content">
                        <span class="toast-title">${title}</span>
                        <span class="toast-msg">${msg}</span>
                    </div>
                    <button class="toast-close" onclick="removeToast(${id})">&times;</button>
                </div>
            `;
            $('#toast-container').append(toastHtml);
            // setTimeout(() => removeToast(id), 5000); // ìë™ ë‹«í˜
        }

        function removeToast(id) {
            const $target = $(`#toast-${id}`);
            if ($target.length) {
                $target.css('animation', 'toastFadeOut 0.3s forwards');
                setTimeout(() => $target.remove(), 300);
            }
        }

        function handleNameChange() {
            const newName = $('#new-character-name').val().trim();
            if (!newName) {
                showToast('ì…ë ¥ ì˜¤ë¥˜', 'ë³€ê²½í•  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
                return;
            }
            if (newName.length < 2) {
                showToast('ì…ë ¥ ì˜¤ë¥˜', 'ì´ë¦„ì€ ìµœì†Œ 2ê¸€ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.', 'warning');
                return;
            }
            $('#user-display-name').text(newName);
            $('#mypage-name').text(newName);
            $('#qr-user-name').text(newName);
            
            showAlert(`ì´ì œë¶€í„° ëª¨í—˜ê°€ë‹˜ì˜ ì´ë¦„ì€<br><b>[${newName}]</b> ì…ë‹ˆë‹¤!`, 'âœ¨', 'ë³€ê²½ ì™„ë£Œ');
            showToast('ë³€ê²½ ì„±ê³µ', 'ìºë¦­í„°ëª…ì´ ì„±ê³µì ìœ¼ë¡œ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤.', 'success');
            $('#new-character-name').val('');
            showPage('page-mypage');
        }

        function handleAmen() {
            const $btn = $('#btn-amen');
            if ($btn.hasClass('disabled')) return;
            $btn.addClass('disabled').text('ì˜¤ëŠ˜ì˜ ë§ì”€ì„ ë§ˆìŒì— ìƒˆê²¼ìŠµë‹ˆë‹¤ âœ¨');
            showToast('ë¯¿ìŒì´ ì„±ì¥í–ˆìŠµë‹ˆë‹¤!', 'ë§ì”€ ë³´ìƒìœ¼ë¡œ 10Pë¥¼ íšë“í–ˆì–´ìš”.', 'reward');
            updateTalent(10);
            showAlert('ì˜¤ëŠ˜ í•˜ë£¨ë„ ë§ì”€ ì•ˆì—ì„œ ìŠ¹ë¦¬í•˜ì„¸ìš”!', 'ğŸ’–', 'ì•„ë©˜!');
        }

        // --- í¬ì¸íŠ¸ ë‚´ì—­ ë¡œì§ ---
        const historyData = [
            { type: 'earn', title: 'ì£¼ì¼ ì¶œì„ ë³´ìƒ', date: '2025.12.28', amount: 100 },
            { type: 'earn', title: 'ì¼ì¼ í€˜ìŠ¤íŠ¸ ì™„ë£Œ', date: '2025.12.27', amount: 50 },
            { type: 'use',  title: 'ë‹¬ë€íŠ¸ ì‹œì¥ (í•™ìš©í’ˆ)', date: '2025.12.20', amount: -500 },
            { type: 'earn', title: 'ì„±ê²½ ì•”ì†¡ ëŒ€íšŒ ìš°ìˆ˜ìƒ', date: '2025.12.15', amount: 300 },
            { type: 'earn', title: 'ì¹œêµ¬ ì „ë„ ë³´ìƒ', date: '2025.12.10', amount: 200 },
            { type: 'use',  title: 'ê°„ì‹ êµ¬ë§¤ (ë–¡ë³¶ì´)', date: '2025.12.05', amount: -150 },
            { type: 'earn', title: 'íŠ¹ë³„ ìƒˆë²½ ê¸°ë„íšŒ', date: '2025.12.01', amount: 100 },
            ...Array(20).fill({ type: 'earn', title: 'ì§€ë‚œ ì£¼ ì¶œì„', date: '2025.11.xx', amount: 50 })
        ];

        let currentHistoryFilter = 'all';
        let currentPage = 1;
        const itemsPerPage = 7; 
        let filteredData = []; 

        function setHistoryFilter(filterType) {
            currentHistoryFilter = filterType;
            currentPage = 1;
            $('.filter-tab').removeClass('active');
            $(`.filter-tab[onclick="setHistoryFilter('${filterType}')"]`).addClass('active');
            renderHistory(true);
        }

        function loadMoreHistory() {
            currentPage++;
            renderHistory(false);
        }

        function renderHistory(reset = false) {
            const $list = $('#point-history-list');
            const $btnMore = $('#btn-load-more');

            if (reset) {
                $list.empty();
                if (currentHistoryFilter === 'all') {
                    filteredData = historyData;
                } else {
                    filteredData = historyData.filter(item => item.type === currentHistoryFilter);
                }
            }

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            if (filteredData.length === 0) {
                $list.html('<div class="empty-history">ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤. í……! ğŸ—‘ï¸</div>');
                $btnMore.hide();
                return;
            }

            pageData.forEach(item => {
                const isPlus = item.amount > 0;
                const colorClass = isPlus ? '#4A90E2' : '#e74c3c'; 
                const amountStr = (isPlus ? '+' : '') + item.amount.toLocaleString() + ' P';
                
                const html = `
                    <div class="menu-item" style="cursor: default; display: flex; justify-content: space-between; align-items: center; animation: fadeIn 0.5s;">
                        <div style="display: flex; flex-direction: column;">
                            <span style="font-size: 0.95rem; font-weight: bold; color:#444;">${item.title}</span>
                            <small style="color: #999; font-weight: normal; margin-top:2px;">${item.date}</small>
                        </div>
                        <span style="color: ${colorClass}; font-weight: 800; font-size:1rem;">${amountStr}</span>
                    </div>
                `;
                $list.append(html);
            });

            if (endIndex >= filteredData.length) {
                $btnMore.hide(); 
            } else {
                $btnMore.show();
                $btnMore.text(`ğŸ‘‡ ë” ë³´ê¸° (${filteredData.length - endIndex}ê°œ ë‚¨ìŒ)`);
            }
        }

        // --- ê¸¸ë“œ ë¡œì§ ---
        function handleGuildContribute() {
            const btn = document.querySelector('.btn-contribute');
            if(btn.disabled) {
                showToast('ì´ë¯¸ ì™„ë£Œ', 'ì˜¤ëŠ˜ì˜ ê¸°ì—¬ë¥¼ ì´ë¯¸ ë§ˆì³¤ìŠµë‹ˆë‹¤!', 'warning');
                return;
            }
            const originalText = btn.innerHTML;
            btn.innerHTML = 'ê¸°ì—¬ ì¤‘...â³';
            
            setTimeout(() => {
                btn.innerHTML = 'âœ… ê¸°ì—¬ ì™„ë£Œ! (ë‚´ì¼ ë˜ ë§Œë‚˜ìš”)';
                btn.disabled = true;
                btn.style.background = '#ccc';
                btn.style.color = '#fff';
                showToast('ê¸°ì—¬ ì„±ê³µ!', 'ê¸¸ë“œ ê³µí—Œë„ +10, ê°œì¸ ë‹¬ë€íŠ¸ +20 íšë“!', 'success');
                updateTalent(20);
                $('.guild-mission-card .progress-bar').css('width', '78%');
                $('.guild-mission-card .mission-percent').text('78%');
            }, 1000);
        }

        function sendGuildChat() {
            const $input = $('#guild-chat-input');
            const msg = $input.val().trim();
            if (!msg) return;

            const myName = $('#user-display-name').text();
            const chatHtml = `
                <div class="chat-msg" style="animation: fadeIn 0.3s;">
                    <span class="chat-user" style="color:#4A90E2;">${myName}:</span>
                    <span class="chat-text">${msg}</span>
                </div>
            `;
            $('#guild-chat-list').append(chatHtml);
            const chatList = document.getElementById('guild-chat-list');
            chatList.scrollTop = chatList.scrollHeight;
            $input.val('');

            if (Math.random() > 0.7) {
                setTimeout(() => {
                    $('#guild-chat-list').append(`
                        <div class="chat-msg" style="animation: fadeIn 0.3s;">
                            <span class="chat-user">ì´ë¯¿ìŒ:</span>
                            <span class="chat-text">ì•„ë©˜! í•¨ê»˜ í˜ë‚´ìš”! ğŸ”¥</span>
                        </div>
                    `);
                    chatList.scrollTop = chatList.scrollHeight;
                }, 1500);
            }
        }

        $('#guild-chat-input').on('keypress', function(e) {
            if (e.which === 13) sendGuildChat();
        });

        // --- ì¶œì„ë¶€ ë¡œì§ ---
        function initSundayAttendance() {
            const today = new Date();
            const currentYear = today.getFullYear();
            const currentMonth = today.getMonth(); 
            
            $('#attendance-date-title').text(`${currentMonth + 1}ì›” ì¶œì„ë¶€`);

            const dayOfWeek = today.getDay(); 
            const isSunday = (dayOfWeek === 0);

            if (isSunday) {
                $('#sunday-badge').show();
                $('#stamp-guide-msg').html('ì£¼ì¼ ì˜ˆë°°<br>ì™”ì–´ìš”!');
                $('#btn-attendance-check').removeClass('disabled');
            } else {
                $('#sunday-badge').hide();
                $('#stamp-guide-msg').html('ì£¼ì¼(ì¼ìš”ì¼)ì—<br>ë§Œë‚˜ìš”!');
                $('#btn-attendance-check').addClass('disabled');
                $('.stamp-icon-before').attr('src', 'https://cdn-icons-png.flaticon.com/512/2693/2693507.png'); 
            }
            renderSundayList(currentYear, currentMonth, today);
        }

        function renderSundayList(year, month, todayObj) {
            const $container = $('#sunday-list-container');
            $container.empty();

            let date = new Date(year, month, 1);
            const todayDate = todayObj.getDate();
            
            while (date.getDay() !== 0) {
                date.setDate(date.getDate() + 1);
            }

            while (date.getMonth() === month) {
                const sundayDate = date.getDate();
                let statusHtml = '';
                let itemClass = 'sunday-item';
                
                if (sundayDate < todayDate) {
                    itemClass += ' done';
                    statusHtml = '<span class="status-icon">âœ… ì¶œì„ì™„ë£Œ (+100P)</span>';
                } else if (sundayDate === todayDate) {
                    itemClass += ' this-week';
                    statusHtml = '<span class="status-icon" id="today-status-text" style="color:#EF6C00;">ğŸ‘‰ ë„ì¥ì„ ì°ì–´ì£¼ì„¸ìš”</span>';
                } else {
                    itemClass += ' locked';
                    statusHtml = '<span class="status-icon" style="color:#aaa;">â³ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘</span>';
                }

                const html = `
                    <div class="${itemClass}" id="sunday-row-${sundayDate}">
                        <div class="sunday-left">
                            <div class="s-date-box">
                                <span class="s-month">${month + 1}ì›”</span>
                                <span class="s-day">${sundayDate}</span>
                            </div>
                            <div style="font-weight:bold; color:#555;">ì£¼ì¼ ì˜ˆë°°</div>
                        </div>
                        <div>${statusHtml}</div>
                    </div>
                `;
                $container.append(html);
                date.setDate(date.getDate() + 7);
            }
        }

        function handleSundayAttendance() {
            const $btn = $('#btn-attendance-check');
            if ($btn.hasClass('checked')) {
                showToast('ì´ë¯¸ ì™„ë£Œ', 'ì˜¤ëŠ˜ ì¶œì„ì€ ì´ë¯¸ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
                return;
            }
            // í‰ì¼ ì²´í¬ ë°©ì§€ ë¡œì§ (í•„ìš” ì‹œ ì£¼ì„ í•´ì œ)
            // const today = new Date();
            // if (today.getDay() !== 0) return; 

            $btn.addClass('checked');
            $btn.find('.stamp-inner-content').hide();
            $btn.find('.stamped-mark').show();
            $('#today-status-text').html('âœ… ì¶œì„ì™„ë£Œ (+100P)').css('color', '#4CAF50');
            $('.sunday-item.this-week').addClass('done');
            updateTalent(100);
            showAlert('ì£¼ì¼ ì¶œì„ ì™„ë£Œ!', 'í•˜ë‚˜ë‹˜ ë§ì”€ ì•ˆì—ì„œ<br>í–‰ë³µí•œ ì£¼ì¼ ë³´ë‚´ì„¸ìš”! (100P íšë“)', 'ğŸ‰ ì•„ë©˜!');
            showToast('ì¶œì„ ì„±ê³µ', '3ì£¼ ì—°ì† ê°œê·¼ ì¤‘ì…ë‹ˆë‹¤!', 'success');
        }

        // --- í€˜ìŠ¤íŠ¸ ë¡œì§ ---
        function initQuestPage() {
            const today = new Date();
            const isSunday = (today.getDay() === 0);
            if (isSunday) {
                $('#sunday-lock-overlay').hide();
            } else {
                $('#sunday-lock-overlay').hide(); // í…ŒìŠ¤íŠ¸ìš© (í•­ìƒ ì—´ë¦¼)
            }
        }

        function handleQuestClick(btn) {
            const $btn = $(btn);
            const $item = $btn.closest('.q-item');
            const reward = parseInt($item.data('reward'));

            if ($btn.hasClass('state-ready')) {
                $btn.removeClass('state-ready').addClass('state-wait');
                $btn.text('ìŠ¹ì¸ìš”ì²­');
                showToast('ìŠ¹ì¸ ìš”ì²­ ì™„ë£Œ', 'ì„ ìƒë‹˜ê»˜ í™•ì¸ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤. (ê°€ìƒ)', 'info');
            }
            else if ($btn.hasClass('state-wait')) {
                if(!confirm('ì„ ìƒë‹˜(ë¶€ëª¨ë‹˜)ê»˜ ë¯¸ì…˜ ì™„ë£Œë¥¼ í™•ì¸ ë°›ìœ¼ì…¨ë‚˜ìš”?')) return;
                $btn.removeClass('state-wait').addClass('state-done');
                $btn.text('ì™„ë£Œë¨');
                $item.addClass('done');
                updateTalent(reward);
                showAlert('í€˜ìŠ¤íŠ¸ ìŠ¹ì¸ ì™„ë£Œ!', `ì°¸ ì˜í–ˆì–´ìš”! ë³´ìƒìœ¼ë¡œ<br><b>${reward}P</b>ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.`, 'ğŸ‰ ì„±ê³µ');
                showToast('ë³´ìƒ ì§€ê¸‰', `${reward} í¬ì¸íŠ¸ íšë“!`, 'reward');
            }
            else if ($btn.hasClass('state-done')) {
                showToast('ì´ë¯¸ ì™„ë£Œ', 'ì˜¤ëŠ˜ì˜ ë³´ìƒì„ ì´ë¯¸ ë°›ì•˜ìŠµë‹ˆë‹¤.', 'warning');
            }
        }
    </script>
</body>
</html>
